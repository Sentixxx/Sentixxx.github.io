<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>论文阅读：MapReduce</title>
      <link href="/posts/37682/"/>
      <url>/posts/37682/</url>
      
        <content type="html"><![CDATA[<h1 id="mapreduce-的目的"><a class="markdownIt-Anchor" href="#mapreduce-的目的"></a> MapReduce 的目的</h1><p>当时互联网刚刚兴起，需要一套系统来处理海量的数据计算问题，同时要做到简单易用，且有足够的容灾能力</p><h1 id="创新点"><a class="markdownIt-Anchor" href="#创新点"></a> 创新点</h1><p>提出了一种新的编程范式，使用 <code>map</code> 将大规模问题转换为子问题，然后用 <code>reduce</code> 将子问题的解汇总，将所有任务抽象为了这两个动作。</p><p><code>map</code> 和 <code>reduce</code> 操作可以用下式概括：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mtable rowspacing="0.24999999999999992em" columnalign="right left right" columnspacing="0em 1em"><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext>map</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"/><mo stretchy="false">(</mo><msub><mi>k</mi><mn>1</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>1</mn></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>  </mtext><mo>→</mo><mtext>  </mtext><mtext>list</mtext><mo stretchy="false">(</mo><msub><mi>k</mi><mn>2</mn></msub><mo separator="true">,</mo><msub><mi>v</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr><mtr><mtd><mstyle scriptlevel="0" displaystyle="true"><mtext>reduce</mtext></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mrow></mrow><mspace width="1em"/><mo stretchy="false">(</mo><msub><mi>k</mi><mn>2</mn></msub><mo separator="true">,</mo><mtext>list</mtext><mo stretchy="false">(</mo><msub><mi>v</mi><mn>2</mn></msub><mo stretchy="false">)</mo><mo stretchy="false">)</mo></mrow></mstyle></mtd><mtd><mstyle scriptlevel="0" displaystyle="true"><mrow><mtext>  </mtext><mo>→</mo><mtext>  </mtext><mtext>list</mtext><mo stretchy="false">(</mo><msub><mi>v</mi><mn>2</mn></msub><mo stretchy="false">)</mo></mrow></mstyle></mtd></mtr></mtable><annotation encoding="application/x-tex">\begin{aligned}\text{map}    &amp;\quad (k_1, v_1)            &amp;\;\rightarrow\; \text{list}(k_2, v_2) \\\text{reduce} &amp;\quad (k_2, \text{list}(v_2)) &amp;\;\rightarrow\; \text{list}(v_2)\end{aligned}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.0000000000000004em;vertical-align:-1.2500000000000002em;"></span><span class="mord"><span class="mtable"><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">map</span></span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord text"><span class="mord">reduce</span></span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span><span class="col-align-l"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">1</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mord"></span><span class="mspace" style="margin-right:1em;"></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord text"><span class="mord">list</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span><span class="arraycolsep" style="width:1em;"></span><span class="col-align-r"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.7500000000000002em;"><span style="top:-3.91em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord text"><span class="mord">list</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03148em;">k</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03148em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mpunct">,</span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span><span style="top:-2.41em;"><span class="pstrut" style="height:3em;"></span><span class="mord"><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">→</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mord text"><span class="mord">list</span></span><span class="mopen">(</span><span class="mord"><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.30110799999999993em;"><span style="top:-2.5500000000000003em;margin-left:-0.03588em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose">)</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.2500000000000002em;"><span></span></span></span></span></span></span></span></span></span></span></span></p><ul><li><code>map</code> 是数据的拆分者，其负责接收原始输入数据，按照业务逻辑进行拆分，生成程序中间的键值对数据 <code>list(k2,v2)</code><ul><li>一般来说，<code>map</code> 是无状态、并行的，每个 <code>map</code> 任务独立处理一部分输入数据，互不干扰</li></ul></li><li><code>reduce</code> 是数据的合并者，负责接收 <code>map</code> 生成的中间键值对，按照<strong>中间键</strong>进行分组，对同一键的所有值进行聚合计算，生成最终结果，即 <code>list(v2)</code><ul><li><code>reduce</code> 任务的实例数量由用户定义，<code>map</code> 生成的中间键值对会通过分区函数分配到不同的 <code>reduce</code> 实例，只有在期望<strong>全局唯一输出</strong>时，我们才会设置实例数量为一</li></ul></li></ul><h2 id="简单的例子"><a class="markdownIt-Anchor" href="#简单的例子"></a> 简单的例子</h2><p>MapReduce 最经典的例子就是单词计数任务，单词计数任务的两个函数定义如下：</p><figure class="highlight go"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">map</span><span class="params">(filename <span class="type">string</span>, contents <span class="type">string</span>)</span></span> []mapreduce.KeyValue &#123;</span><br><span class="line">words := strings.FieldsFunc(contents, <span class="function"><span class="keyword">func</span><span class="params">(r <span class="type">rune</span>)</span></span> <span class="type">bool</span> &#123;</span><br><span class="line"><span class="keyword">return</span> !unicode.IsLetter(r)</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">var</span> res []mapreduce.KeyValue</span><br><span class="line"><span class="keyword">for</span> _,word := <span class="keyword">range</span> words &#123;</span><br><span class="line">res = <span class="built_in">append</span>(res, mapreduce.KeyValue&#123; Key: word, Value: <span class="string">&quot;1&quot;</span>&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> res</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">reduce</span><span class="params">(key <span class="type">string</span>, values []<span class="type">string</span>)</span></span> <span class="type">string</span> &#123;</span><br><span class="line">result := <span class="number">0</span></span><br><span class="line"><span class="keyword">for</span> _,value := <span class="keyword">range</span> values &#123;</span><br><span class="line">count, _ := strconv.Atoi(value)</span><br><span class="line">result += count</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">return</span> strconv.Itoa(result)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="how-to-work"><a class="markdownIt-Anchor" href="#how-to-work"></a> How To Work?</h1><p>MapReduce 的实现方式如下图所示<br /><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/20251210151110740.png" alt="" /></p><ul><li>Master 节点接受来自用户的 Map 和 Reduce 任务，将这些任务分配给 Worker 节点</li><li>中间数据落盘，Map Worker 节点将工作结果写入本地磁盘，并通知 Master 位置</li><li>当 Reduce 工作节点收到相关通知后，会通过远程调用读取来自 Map 工作节点本地磁盘的缓冲数据。当读取完全部的中间数据之后，将所有的键值对按照键顺序排序（如果数据量过大，中间结果过多，我们可能需要外部排序）<ul><li>key 很多种类的情况下，排序是有必要的吗？实践表明，数据分片后，往往同一 key 的数据在同一片 M 中。这体现了数据在空间上的局部性。</li></ul></li><li>如果函数正确执行完毕，结果会被存储在 R 个输出文件中（每个 Reduce 任务一个输出文件）</li></ul><h2 id="容错机制"><a class="markdownIt-Anchor" href="#容错机制"></a> 容错机制</h2><h3 id="worker-故障"><a class="markdownIt-Anchor" href="#worker-故障"></a> Worker 故障</h3><ul><li>Master 会定期 Ping Worker 节点，确认 Worker 在线，如果在一定时间段内收不到响应，则将该 Worker 标记为 Failed，该工作节点已完成的所有 Map 任务都会被重置为 Idle 状态以在其他节点上被调度，同理，该工作节点上正在进行的 Map 和 Reduce 任务也会被重置<ul><li>这是因为如果该 Worker 故障，那么存储在该 Worker 本地磁盘的 Map 任务结果也会无法访问，因此已完成的 Map 任务也要重做</li></ul></li></ul><h3 id="master-故障"><a class="markdownIt-Anchor" href="#master-故障"></a> Master 故障</h3><ul><li>Master 会定期将状态保存到磁盘，崩溃后直接利用保存的状态恢复，此外，用户侧也可以自行决定是否要重试，也可以直接终止 MapReduce 任务</li></ul><h2 id="备份任务"><a class="markdownIt-Anchor" href="#备份任务"></a> 备份任务</h2><ul><li><p>集群中的部分机器可能因为各种原因成为“掉队者”，这些机器在执行最后几个任务时的速度极慢，会严重拖慢整个 MapReduce 任务的执行时间</p></li><li><p>我们有一个通用的机制来缓解慢工作者的问题。当一个 MapReduce 操作接近完成时，Master 节点会安排对剩余的正在进行中的任务执行一个备份任务（对已有任务的复制）。只有当主执行或备份任务执行完成时，任务才被标记为已完成。我们调整了这个机制，使得它通常只会增加操作使用的 CPU 资源的很少部分。</p></li></ul><h1 id="缺陷"><a class="markdownIt-Anchor" href="#缺陷"></a> 缺陷</h1><p>不适合低延迟/迭代计算，每次 Map 的中间结果都要写磁盘，IO 开销极大。</p><h1 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h1><ol><li><a href="https://juejin.cn/post/6844903862562717703">经典分布式论文阅读：MapReduce</a></li><li><a href="https://superlova.github.io/2021/05/04/%E3%80%90%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB%E7%AC%94%E8%AE%B0%E3%80%91MapReduce-Simplified-Data-Processing-on-Large-Clusters/">【论文阅读笔记】MapReduce: Simplified Data Processing on Large Clusters</a></li><li><a href="https://zhuanlan.zhihu.com/p/640934945">MapReduce论文阅读</a></li><li><a href="https://www.cnblogs.com/jye159X/p/17341960.html">MapReduce论文阅读报告</a></li><li><a href="https://lvsizhe.github.io/course/2020/03/mapreduce.html">https://lvsizhe.github.io/course/2020/03/mapreduce.html</a></li></ol>]]></content>
      
      
      <categories>
          
          <category> 学习 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 学习 </tag>
            
            <tag> 论文 </tag>
            
            <tag> 分布式系统 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>以一种访问权限不允许的方式做了一个访问套接字的尝试处理</title>
      <link href="/posts/39317/"/>
      <url>/posts/39317/</url>
      
        <content type="html"><![CDATA[<p>有一个项目需要运行在本地 http 服务器的 8080 端口上，之前还好的，今天突然就提示 <code>以一种访问权限不允许的方式做了一个访问套接字的尝试</code>，<br />在管理员模式下运行 <code>netstat -ano | findstr 8080</code> 没有任何输出</p><p>上网搜索发现这可能是一个规则问题</p><blockquote><p><a href="https://stackoverflow.com/questions/54671199/kestrel-unable-to-start">https://stackoverflow.com/questions/54671199/kestrel-unable-to-start</a></p></blockquote><p>尝试执行 <code>netsh interface ipv4 show excludedportrange protocol=tcp</code>，发现 8080 端口不知道为什么被排除了，使用以下指令成功修复：</p><figure class="highlight powershell"><table><tr><td class="code"><pre><span class="line">net stop winnat</span><br><span class="line">netsh interface ipv4 show excludedportrange protocol=tcp</span><br><span class="line">net <span class="built_in">start</span> winnat</span><br><span class="line">netsh interface ipv4 show excludedportrange protocol=tcp</span><br></pre></td></tr></table></figure><h2 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h2><ul><li><a href="https://gsw945.com/index.php/archives/33/">(Windows)以一种访问权限不允许的方式做了一个访问套接字的尝试处理</a></li><li><a href="https://stackoverflow.com/questions/54671199/kestrel-unable-to-start/60168299#60168299">Kestrel unable to start</a></li><li><a href="https://superuser.com/questions/1486417/unable-to-start-kestrel-getting-an-attempt-was-made-to-access-a-socket-in-a-way/1504618#1504618">Unable to start Kestrel getting ‘An attempt was made to access a socket in a way forbidden by its access permissions’</a></li><li><a href="https://superuser.com/questions/1579346/many-excludedportranges-how-to-delete-hyper-v-is-disabled/1610009#1610009">Many excludedportranges how to delete - hyper-v is disabled</a></li><li><a href="https://github.com/docker/for-win/issues/3171#issuecomment-739740248">Unable to bind ports: Docker-for-Windows &amp; Hyper-V excluding but not using important port ranges #3171</a></li></ul>]]></content>
      
      
      <categories>
          
          <category> 经验 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 经验 </tag>
            
            <tag> 网络 </tag>
            
            <tag> Windows </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>阿里云OSS资源路径避坑</title>
      <link href="/posts/10362/"/>
      <url>/posts/10362/</url>
      
        <content type="html"><![CDATA[<p>阿里云 OSS 在解析请求时会把 <code>+</code> 转义成 <code></code>（空格），这点与 S3 恰恰相反，需要做预处理</p>]]></content>
      
      
      <categories>
          
          <category> 经验 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 经验 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>CPPCLI将第三方DLL链接到CSharp项目</title>
      <link href="/posts/65504/"/>
      <url>/posts/65504/</url>
      
        <content type="html"><![CDATA[<blockquote><p>最近需要将第三方的 DLL 封装成 csharp 的模块，可是我没有源码，只有头文件，网上综合调查了方案，最后选择了 C++/CLI</p></blockquote><p>具体可见微软的<a href="https://learn.microsoft.com/zh-cn/cpp/dotnet/dotnet-programming-with-cpp-cli-visual-cpp?view=msvc-170">官方文档</a></p><h1 id="第一步创建-clr-项目"><a class="markdownIt-Anchor" href="#第一步创建-clr-项目"></a> 第一步，创建 CLR 项目</h1><p>这里默认你已经通过各种手段获得了 DLL 和头文件<br />这里使用 Visual Stdio 创建一个新的 C++ CLR 项目</p><h1 id="基本编辑"><a class="markdownIt-Anchor" href="#基本编辑"></a> 基本编辑</h1><p>这里的基本语法还是和 C++一样的</p><p>进入项目，自行创建一个类，就会生成一个 CPP 和 H 文件<br />这里需要在头文件中包含 DLL 内相关函数和类定义的头文件，直接使用绝对路径包含即可</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&quot;path\to\your\header.h&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> ref <span class="keyword">class</span> <span class="title class_">YourModule</span> &#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后像 C++创建一个类那样，设置构造函数和成员函数，并实现<br />这里你的实现可以直接调用 DLL 中的函数，实现封装。</p><h1 id="设置编译选项"><a class="markdownIt-Anchor" href="#设置编译选项"></a> 设置编译选项</h1><p>右键项目，打开属性，将 Release 的配置类型修改为“动态库(. dll)”，注意这里的目标平台需要和你的 DLL 的目标平台相兼容<br />选择&quot;高级&quot;，设置运行时框架，这里决定了你编译出 DLL 的运行时框架，需要与你的 CS 项目版本相同<br />选择 “VC++目录” -&gt; “库目录”，将你的 DLL 文件路径写进去<br />选择&quot;链接器&quot; -&gt; “常规” -&gt; “附加依赖项”，添加你的 LIB 路径，然后生成项目即可</p><p>你会在项目的生成目录发现两个 DLL，这里要注意！有一个 DLL 是你生成的 DLL，还有一个 DLL 名为 <code>Ijwhost.dll</code>，这个 DLL 是 C++/CLI 运行时必须的依赖，需要一起打包进项目中，同时还需要打包你原来的第三方 DLL，也就是说，最后运行时需要 <strong>3个dll</strong></p><h1 id="导入"><a class="markdownIt-Anchor" href="#导入"></a> 导入</h1><p>进入项目，将生成的模块 DLL 导入即可</p><h1 id="参考"><a class="markdownIt-Anchor" href="#参考"></a> 参考</h1><p><a href="https://learn.microsoft.com/zh-cn/cpp/dotnet/cpp-cli-tasks?view=msvc-170">微软官方文档</a><br /><a href="https://www.zhihu.com/question/29429287/answer/2158425208">知乎相关问答</a><br /><a href="https://www.cnblogs.com/jshchg/p/12898853.html">jshchg 的博客</a></p>]]></content>
      
      
      <categories>
          
          <category> 经验 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 经验 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>tcpdump指定dst端口抓包</title>
      <link href="/posts/20647/"/>
      <url>/posts/20647/</url>
      
        <content type="html"><![CDATA[<p>tcpdump 在抓包时使用 <a href="https://www.tcpdump.org/manpages/pcap-filter.7.html">libpcap filter</a> 作为过滤，这种过滤语法又叫 BPF 语法，其中可以使用 <code>port num</code> 作为语法过滤指定端口的报文，但是有时会发现，当启用过滤后，反而无法从指定端口抓到包，而没有过滤时却可以看到相关的包</p><p>遇到这种问题，可能是由于你监听的网卡是 VLAN，VLAN 网卡在发送报文时会加上一个 VLAN 头来标识，这时需要改变原来的语法，使用 <code>vlan and port num</code> 进行过滤，这样就可以识别出 vlan 报文，进而对报文的端口进行识别。</p><blockquote><p><strong>vlan</strong> <em>[vlan_id]</em></p><p>True if the packet is an IEEE 802.1Q VLAN packet. If the optional <em>vlan_id</em> is specified, only true if the packet has the specified <em>vlan_id</em>. Note that the first <strong>vlan</strong> keyword encountered in an expression changes the decoding offsets for the remainder of the expression on the assumption that the packet is a VLAN packet. The <code>vlan [vlan_id]</code> keyword may be used more than once, to filter on VLAN hierarchies. Each use of that keyword increments the filter offsets by 4.</p><p>For example:</p><p>vlan 100 &amp;&amp; vlan 200</p><p>filters on VLAN 200 encapsulated within VLAN 100, and</p><p>vlan &amp;&amp; vlan 300 &amp;&amp; ip</p><p>filters IPv 4 protocol encapsulated in VLAN 300 encapsulated within any higher order VLAN.</p></blockquote>]]></content>
      
      
      <categories>
          
          <category> 经验 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 经验 </tag>
            
            <tag> 网络 </tag>
            
            <tag> BPF </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>zerotier自建planet容器迁移</title>
      <link href="/posts/28320/"/>
      <url>/posts/28320/</url>
      
        <content type="html"><![CDATA[<blockquote><p>最近续费域名发现阿里云服务器 99 一年 2c2g，感觉自己血亏用了一整年的 78/month 的腾讯云，遂决定迁移。<br />经过测试发现 Zerotier 在迁移后需要根据 IP 重新生成 planet 文件，仍然需要重新分发，目前似乎没有好的解决办法，不如重新安装，安装时服务器的防火墙端口记得开</p></blockquote><h1 id="nginx-配置"><a class="markdownIt-Anchor" href="#nginx-配置"></a> Nginx 配置</h1><p>这次有一个阿里云的域名，干脆顺便配个 nginx<br />首先安装 nginx</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">yum install nginx</span><br></pre></td></tr></table></figure><p>然后进入到 nginx 的目录，新建一个配置文件，写入以下内容</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /etc/nginx</span><br><span class="line">vim conf.d/zerotier.conf</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">upstream zerotier &#123;</span><br><span class="line">    server 127.0.0.1:3443;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">server &#123;</span><br><span class="line">    listen 80;</span><br><span class="line">    server_name &#123;your_site&#125;; # 替换为自己的域名</span><br><span class="line"></span><br><span class="line">    location /zerotier/ &#123;</span><br><span class="line">        proxy_pass http://zerotier/;</span><br><span class="line">        proxy_set_header HOST $host;</span><br><span class="line">        proxy_set_header X-Forwarded-Proto $scheme;</span><br><span class="line">        proxy_set_header X-Real-IP $remote_addr;</span><br><span class="line">        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>保存后使用 <code>nginx -t</code> 测试一下，重启服务即可</p><p>%% # 备份容器</p><ol><li>找到想要迁移的容器 ID</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker ps -a</span><br></pre></td></tr></table></figure><ol start="2"><li>保存</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker commit [ID] [name]:[tag]</span><br></pre></td></tr></table></figure><ol start="3"><li>将保存的镜像文件保存为压缩包</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker save [name]:[tag] &gt; path/to/name.tar</span><br></pre></td></tr></table></figure><h1 id="迁移到新的环境中"><a class="markdownIt-Anchor" href="#迁移到新的环境中"></a> 迁移到新的环境中</h1><ol><li>上传之前的压缩包，我这里使用 SCP 直接上传到目标服务器</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">scp path/to/name.tar root@[ip]:/new/path</span><br></pre></td></tr></table></figure><ol start="2"><li>在新服务器加载该镜像</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker load -i path/to/new/tar</span><br></pre></td></tr></table></figure><ol start="3"><li>运行该镜像</li></ol><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">docker run -d -p 9995:9995 -p 9995:9995/udp -p 3443:3443 --name zerotier-planet -restart unless-stopped my-planet:v1.0</span><br></pre></td></tr></table></figure><ol start="4"><li>访问网页 UI 3443 端口，发现失败，使用 <code>docker log</code> 检查后发现配置文件仍然指向之前的服务器 IP，因此需要修改</li><li>这里发现如果 IP 地址修改后，对应的 planet 文件也会修改，因此需要对每个客户端去修改 planet，而且之前的网络数据全部丢了。 %%</li></ol><h1 id="to-be-continued"><a class="markdownIt-Anchor" href="#to-be-continued"></a> To be continued</h1>]]></content>
      
      
      <categories>
          
          <category> 经验 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 经验 </tag>
            
            <tag> 安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>20250127001036</title>
      <link href="/posts/51303/"/>
      <url>/posts/51303/</url>
      
        <content type="html"><![CDATA[<p>本来以为 workflow 已经很完善了，没想到随便一测又报错了，尝试解决未果，无奈删除子模块引用，直接暴力 clone</p><p>复杂度果然是自动化之敌</p>]]></content>
      
      
      <categories>
          
          <category> 日常 </category>
          
      </categories>
      
      
    </entry>
    
    
    
    <entry>
      <title>基于ARM架构交叉编译libpcap库的技术指南</title>
      <link href="/posts/31746/"/>
      <url>/posts/31746/</url>
      
        <content type="html"><![CDATA[<h1 id="基于-arm-架构交叉编译-libpcap-库的技术指南"><a class="markdownIt-Anchor" href="#基于-arm-架构交叉编译-libpcap-库的技术指南"></a> 基于 ARM 架构交叉编译 libpcap 库的技术指南</h1><h2 id="一-交叉编译环境搭建"><a class="markdownIt-Anchor" href="#一-交叉编译环境搭建"></a> 一、交叉编译环境搭建</h2><h3 id="1-获取交叉编译工具链"><a class="markdownIt-Anchor" href="#1-获取交叉编译工具链"></a> 1. 获取交叉编译工具链</h3><p>推荐使用 Linaro 官方提供的 6.2 版本工具链：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">wget https://releases.linaro.org/components/toolchain/binaries/6.2-2016.11/arm-linux-gnueabihf/gcc-linaro-6.2.1-2016.11-x86_64_arm-linux-gnueabihf.tar.xz</span><br></pre></td></tr></table></figure><p>文件校验信息：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">SHA256: 5eb7ab2f8a0b4b960900321505cd6923a072cb3e2412102f5f72a6e74c2f0a55</span><br></pre></td></tr></table></figure><h3 id="2-配置编译环境"><a class="markdownIt-Anchor" href="#2-配置编译环境"></a> 2. 配置编译环境</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 解压工具链</span></span><br><span class="line">tar -xvf gcc-linaro-6.2.1-2016.11-x86_64_arm-linux-gnueabihf.tar.xz</span><br><span class="line"></span><br><span class="line"><span class="comment"># 添加至环境变量</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/path/to/gcc-linaro-6.2.1-2016.11-x86_64_arm-linux-gnueabihf/bin</span><br><span class="line"></span><br><span class="line"><span class="comment"># 验证编译器状态</span></span><br><span class="line">arm-linux-gnueabihf-gcc -v</span><br></pre></td></tr></table></figure><h2 id="二-libpcap-编译流程"><a class="markdownIt-Anchor" href="#二-libpcap-编译流程"></a> 二、libpcap 编译流程</h2><h3 id="1-准备编译环境"><a class="markdownIt-Anchor" href="#1-准备编译环境"></a> 1. 准备编译环境</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">cd</span> /path/to/libpcap-src</span><br><span class="line"></span><br><span class="line"><span class="comment"># 清理历史编译产物</span></span><br><span class="line">make clean</span><br><span class="line"></span><br><span class="line"><span class="comment"># 安装依赖工具</span></span><br><span class="line"><span class="built_in">sudo</span> apt install -y gcc flex byacc</span><br></pre></td></tr></table></figure><h3 id="2-配置编译参数"><a class="markdownIt-Anchor" href="#2-配置编译参数"></a> 2. 配置编译参数</h3><p>根据工具链输出确定目标平台（示例为 arm-linux-gnueabihf）：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">./configure --host=arm-linux-gnueabihf</span><br></pre></td></tr></table></figure><h3 id="3-执行编译安装"><a class="markdownIt-Anchor" href="#3-执行编译安装"></a> 3. 执行编译安装</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">make -j$(<span class="built_in">nproc</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment"># 可选安装至系统目录</span></span><br><span class="line"><span class="built_in">sudo</span> make install</span><br></pre></td></tr></table></figure><p>编译产物路径：</p><ul><li>临时产物：当前目录下的 <code>.so</code> 文件</li><li>系统安装：<code>/usr/local/lib</code></li></ul><h2 id="三-部署与符号链接处理"><a class="markdownIt-Anchor" href="#三-部署与符号链接处理"></a> 三、部署与符号链接处理</h2><h3 id="1-目标设备部署"><a class="markdownIt-Anchor" href="#1-目标设备部署"></a> 1. 目标设备部署</h3><p>将生成的 <code>libpcap.so.1.10.5</code> 上传至目标设备的 <code>/root/pcap/</code> 目录</p><h3 id="2-创建兼容性符号链接"><a class="markdownIt-Anchor" href="#2-创建兼容性符号链接"></a> 2. 创建兼容性符号链接</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line"><span class="built_in">ln</span> -s /root/pcap/libpcap.so.1.10.5 /root/pcap/wpcap.so</span><br></pre></td></tr></table></figure><h3 id="3-验证依赖关系"><a class="markdownIt-Anchor" href="#3-验证依赖关系"></a> 3. 验证依赖关系</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">ldd /root/pcap/wpcap.so</span><br></pre></td></tr></table></figure><h2 id="四-常见问题排查"><a class="markdownIt-Anchor" href="#四-常见问题排查"></a> 四、常见问题排查</h2><h3 id="1-共享库加载失败问题"><a class="markdownIt-Anchor" href="#1-共享库加载失败问题"></a> 1. 共享库加载失败问题</h3><p>典型错误信息：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">[ERROR] Unable to load shared library &#x27;wpcap&#x27; or its dependencies</span><br></pre></td></tr></table></figure><p>解决方案：</p><ul><li>确认符号链接路径正确</li><li>检查 LD_LIBRARY_PATH 是否包含库目录</li><li>参考官方问题跟踪：<a href="https://github.com/dotpcap/sharppcap/issues/543">https://github.com/dotpcap/sharppcap/issues/543</a></li></ul><h2 id="五-技术原理说明"><a class="markdownIt-Anchor" href="#五-技术原理说明"></a> 五、技术原理说明</h2><ol><li><p>符号链接必要性：SharpPcap 库为保持跨平台兼容性，在 Linux 环境下需通过 <code>wpcap.so</code> 别名访问 libpcap 实现</p></li><li><p>交叉编译要点：</p><ul><li><code>--host</code> 参数指定目标平台 ABI</li><li>工具链需与目标设备 glibc 版本匹配</li><li>建议使用静态链接或携带依赖库</li></ul></li></ol>]]></content>
      
      
      <categories>
          
          <category> 经验 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 经验 </tag>
            
            <tag> cpp </tag>
            
            <tag> 安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>FTP同步服务静默崩溃故障分析：SIGPIPE信号与TCP半关闭状态的致命陷阱</title>
      <link href="/posts/63310/"/>
      <url>/posts/63310/</url>
      
        <content type="html"><![CDATA[<h1 id="问题"><a class="markdownIt-Anchor" href="#问题"></a> 问题</h1><h2 id="故障情景"><a class="markdownIt-Anchor" href="#故障情景"></a> 故障情景</h2><ul><li>业务背景：<ul><li>技术栈：C++线程池 + FTP 协议长连接</li><li>分布式系统中的文件 FTP 同步服务</li></ul></li><li>故障描述：<ul><li>本地FTP目录同步服务存在非正常进程终止缺陷。当远程FTP服务器发生非计划性停机（服务崩溃/网络中断/强制kill进程）时，本地同步进程发生静默崩溃（无退出状态码、无异常抛出）</li></ul></li></ul><h2 id="故障分析"><a class="markdownIt-Anchor" href="#故障分析"></a> 故障分析</h2><p>首先通过打印的 LOG 信息，快速定位到了 tcpSocket 的 <code>Send()</code> 方法中，<code>Send()</code> 方法的实现如下：</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">ssize_t</span> <span class="title">TcpSocket::Send</span><span class="params">(<span class="type">const</span> <span class="type">void</span> *buf, <span class="type">int</span> len)</span> <span class="type">const</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!connected_) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ::<span class="built_in">write</span>(skt_, buf, len);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="添加-try-catch-语句"><a class="markdownIt-Anchor" href="#添加-try-catch-语句"></a> 添加 try-catch 语句</h3><p>首先先对其添加了 try-catch 语句尝试捕获异常，发现程序仍然直接退出<br /><strong>事后查阅资料发现，POSIX 的系统调用的错误以返回值出现，因此这里 try-catch 完全无效，应该针对返回值进行 DEBUG</strong></p><h3 id="查看系统内核-log"><a class="markdownIt-Anchor" href="#查看系统内核-log"></a> 查看系统内核 LOG</h3><p>既然程序直接退出，没有任何错误出现，这里怀疑有可能是程序抛出错误到了内核层 (程序运行在一个定制版的 Linux 系统上)，使用 <code>dmesg</code> 查看内核日志，发现不存在任何相关的错误。<br />于是尝试更换运行环境，编译到了另一台设备上，发现仍然出现这个错误。</p><h3 id="使用-vscode-debugger-进行单步调试"><a class="markdownIt-Anchor" href="#使用-vscode-debugger-进行单步调试"></a> 使用 VSCode Debugger 进行单步调试</h3><p>在 <code>Send()</code> 处打上了断点，经过调试发现这里出现了 <code>Broken PIPE Error</code>，上网进行相关搜索，得知这是一个信号的相关问题。</p><blockquote><p>对一个对端已经关闭的socket调用两次write, 第二次将会生成SIGPIPE信号, 该信号默认结束进程。</p></blockquote><h1 id="tcp-过程详解"><a class="markdownIt-Anchor" href="#tcp-过程详解"></a> TCP 过程详解</h1><p>当远程 FTP 服务端发生非正常断开时，TCP 连接状态变化时序：</p><ol><li><strong>正常建立连接阶段</strong><br />本地客户端与服务端完成三次握手，<code>connected_</code> 标志为 <code>true</code></li><li><strong>服务端异常中断阶段</strong><br />服务端进程被强制 kill 或发生网络中断：<ul><li>服务端未发送 FIN：直接触发 RST（如进程被 kill）</li><li>服务端发送 FIN：进入四次挥手流程（如正常关闭）</li></ul></li><li><strong>客户端首次发送数据阶段</strong><br />当本地线程池中的工作线程调用 <code>TcpSocket::Send()</code> 时：<ul><li>若连接已收到 RST：<ul><li>第一次 <code>::write()</code> 将返回 <code>-1</code>，<code>errno=ECONNRESET</code></li></ul></li><li>若连接处于半关闭状态（收到 FIN）：<ul><li>第一次 <code>::write()</code> 成功返回（数据进入发送缓冲区）</li><li>第二次 <code>::write()</code> 触发 <code>SIGPIPE</code>（内核检测到无效写入）</li></ul></li></ul></li></ol><h2 id="半关闭状态"><a class="markdownIt-Anchor" href="#半关闭状态"></a> 半关闭状态</h2><p>半关闭状态（Half-Close State）是 TCP 协议栈实现的特殊连接状态，其特征表现为：<strong>通信双方中某一端主动关闭数据发送通道，同时保持数据接收通道开放</strong>。这种机制使得 TCP 连接具备非对称数据传输能力，类似现实中的单行道交通模式。</p><h2 id="技术原理剖析"><a class="markdownIt-Anchor" href="#技术原理剖析"></a> 技术原理剖析</h2><h3 id="全双工信道解构"><a class="markdownIt-Anchor" href="#全双工信道解构"></a> 全双工信道解构</h3><p>TCP 协议的全双工特性本质上是将物理信道虚拟划分为两条独立的单工信道：</p><ol><li><strong>发送信道</strong><ul><li>本地端口 → 远程端口</li><li>由本地端点完全控制</li></ul></li><li><strong>接收信道</strong><ul><li>远程端口 → 本地端口</li><li>由远程端点完全控制</li></ul></li></ol><h3 id="操作指令不可见性"><a class="markdownIt-Anchor" href="#操作指令不可见性"></a> 操作指令不可见性</h3><p>TCP 协议栈存在以下重要设计特征：</p><ul><li><strong>系统调用屏蔽</strong>：无法通过协议层直接判断对端调用的是：<ul><li><code>close()</code>：完全关闭套接字（双通道）</li><li><code>shutdown(SHUT_WR)</code>：仅关闭发送通道</li></ul></li></ul><table><thead><tr><th>操作</th><th>系统调用层面</th><th>协议层表现</th><th>文件描述符状态</th></tr></thead><tbody><tr><td><strong><code>close()</code></strong></td><td>释放文件描述符引用计数</td><td>当引用计数归零时发送 FIN</td><td>彻底销毁</td></tr><tr><td><strong><code>shutdown(SHUT_WR)</code></strong></td><td>立即关闭发送通道（无视引用计数）</td><td>立即发送 FIN</td><td>保留可用</td></tr></tbody></table><h2 id="sigpipe-的产生条件"><a class="markdownIt-Anchor" href="#sigpipe-的产生条件"></a> SIGPIPE 的产生条件</h2><p>由于 TCP 是全双工通道，因此在应用层来看，即使对端调用了 <code>close()</code> 也只能关闭对方的发送信道，我方仍能发送数据。<br />当对端 close 一个连接时，若本地接着发数据。根据 TCP 协议的规定，会收到一个 RST 响应，本地再往对端发送数据时，系统会发出一个 <code>SIGPIPE</code> 信号给进程，告诉进程这个连接已经断开了，不要再写了。</p><blockquote><p>对一个已经收到FIN包的socket调用read方法, 如果接收缓冲已空, 则返回0, 这就是常说的表示连接关闭. 但第一次对其调用write方法时, 如果发送缓冲没问题, 会返回正确写入(发送). 但发送的报文会导致对端发送RST报文, 因为对端的socket已经调用了close, 完全关闭, 既不发送, 也不接收数据. 所以, 第二次调用write方法(假设在收到RST之后), 会生成SIGPIPE信号, 导致进程退出.</p></blockquote><h1 id="修复"><a class="markdownIt-Anchor" href="#修复"></a> 修复</h1><p>在原有的基础上添加了链接的检查机制</p><figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="type">ssize_t</span> <span class="title">TcpSocket::Send</span><span class="params">(<span class="type">const</span> <span class="type">void</span> *buf, <span class="type">int</span> len)</span> </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (!connected_) &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="type">ssize_t</span> ret = <span class="number">0</span>;</span><br><span class="line">  <span class="keyword">struct</span> <span class="title class_">pollfd</span> pollfd;</span><br><span class="line">  pollfd.fd = skt_;</span><br><span class="line">  pollfd.events = POLLOUT;</span><br><span class="line">  <span class="type">int</span> poll_result = <span class="built_in">poll</span>(&amp;pollfd , <span class="number">1</span> , <span class="number">1000</span>);</span><br><span class="line">  <span class="keyword">if</span> (poll_result == <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="comment">// timeout can not write</span></span><br><span class="line">    <span class="built_in">Close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">else</span> <span class="keyword">if</span> ((pollfd.revents &amp; (POLLERR | POLLHUP | POLLNVAL)) &gt; <span class="number">0</span> ||</span><br><span class="line">    poll_result &lt; <span class="number">0</span>) &#123;</span><br><span class="line">    <span class="built_in">Close</span>();</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">  ret = ::<span class="built_in">write</span>(skt_, buf, len);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> ret;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="反思与更多的改进"><a class="markdownIt-Anchor" href="#反思与更多的改进"></a> 反思与更多的改进</h1><h2 id="线程池对信号的处理机制"><a class="markdownIt-Anchor" href="#线程池对信号的处理机制"></a> 线程池对信号的处理机制</h2><p><strong>统一信号处理器</strong></p><ul><li>在进程启动时注册全局信号处理函数（如 <code>SIGPIPE/SIGSEGV</code>），禁止在线程池工作线程中单独设置信号处理，避免不可控行为<br /><strong>线程信号屏蔽</strong></li><li>使用 <code>pthread_sigmask</code> 屏蔽工作线程对关键信号的响应，仅允许主线程处理信号</li></ul><h2 id="日志监控增强"><a class="markdownIt-Anchor" href="#日志监控增强"></a> 日志监控增强</h2><p>应当增加系统调用错误日志与线程池事件日志</p>]]></content>
      
      
      <categories>
          
          <category> 经验 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 经验 </tag>
            
            <tag> cpp </tag>
            
            <tag> 网络 </tag>
            
            <tag> DEBUG </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>WSL2 配置 tensorflow 环境</title>
      <link href="/posts/9832/"/>
      <url>/posts/9832/</url>
      
        <content type="html"><![CDATA[<h2 id="windows-系统中更新-nvida-驱动"><a class="markdownIt-Anchor" href="#windows-系统中更新-nvida-驱动"></a> Windows 系统中更新 NVIDA 驱动</h2><p>这里可以直接通过 Geforce Experience 直接更新</p><p>更新完成后可以在命令行/wsl 中输入 <code>nvidia-smi</code></p><p>可以看到输出</p><p><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/image-20240317172921071.png" alt="image-20240317172921071.png" /></p><p>这里的 CUDA Version 指的是该驱动版本最高可支持的 CUDA 版本</p><h2 id="安装-cuda"><a class="markdownIt-Anchor" href="#安装-cuda"></a> 安装 CUDA</h2><p>到 <a href="https://developer.nvidia.com/cuda-downloads?target_os=Linux&amp;target_arch=x86_64&amp;Distribution=WSL-Ubuntu&amp;target_version=2.0&amp;target_type=deb_local">NVIDIA官网</a>下载符合条件的 CUDA</p><p><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/image-20240317172200178.png" alt="image-20240317172200178.png" /></p><p>这里我一开始直接选择安装了最新版的 CUDA 12.4，随后发现 Tensorflow 目前 (2024.3.17) 并不支持 12.4，于是重新安装，选择了 CUDA 11.2</p><p><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/image-20240317172422147.png" alt="image-20240317172422147.png" /></p><p><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/image-20240317172500352.png" alt="image-20240317172500352.png" /></p><p>直接下载 EXE 版本安装即可</p><p>在安装时，会发现安装报错 <code>cuda you already have a newer version of the nvidia frameview sdk installed</code></p><p>这里需要到系统设置里卸载<strong>NVIDIA frameview sdk</strong> 组件，我使用的是 <a href="https://geekuninstaller.com/download">Geek</a> 进行卸载，很干净</p><p><strong>注意：不要直接到 NVIDIA 文件夹删除对应文件</strong></p><h2 id="下载-anaconda"><a class="markdownIt-Anchor" href="#下载-anaconda"></a> 下载 ANACONDA</h2><p>到<a href="https://repo.anaconda.com/archive/">最新下载地址</a>找到对应的 ANACONDA 版本，复制链接</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">https://www.anaconda.com/products/distribution#linux</span><br><span class="line">wget https://repo.anaconda.com/archive/Anaconda3-2021.11-Linux-x86_64.sh</span><br><span class="line">bash ./Anaconda3-2021.11-Linux-x86_64.sh</span><br></pre></td></tr></table></figure><p>根据脚本说明安装并编辑环境变量</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">export PATH=&quot;/path/to/conda/bin:$PATH&quot;</span><br></pre></td></tr></table></figure><p>使用 <code>conda init</code> 进行初始化</p><h3 id="wsl-中下载-cuda-toolkit"><a class="markdownIt-Anchor" href="#wsl-中下载-cuda-toolkit"></a> WSL 中下载 CUDA TOOLKIT</h3><p>前往官网找到对应版本的 TOOLKIT：<a href="https://developer.nvidia.com/cuda-toolkit-archive">https://developer.nvidia.com/cuda-toolkit-archive</a></p><p>复制官网指令进行安装</p><p><strong>注意：如果不是最新版本，需要将最后一行修改为对应的版本号</strong></p><h3 id="错误处理"><a class="markdownIt-Anchor" href="#错误处理"></a> 错误处理</h3><p>这里如果之前安装过不同版本的 TOOLKIT，可能会报错</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Errors were encountered while processing:</span><br><span class="line"> /tmp/apt-dpkg-install-vFgFO4/00-cuda-cudart-11-2_11.2.72-1_amd64.deb</span><br><span class="line">E: Sub-process /usr/bin/dpkg returned an error code (1)</span><br></pre></td></tr></table></figure><p>这里需要卸载已有的 CUDA TOOLKIT</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo dpkg --force-all -P $(dpkg -l | grep cuda | awk &#x27;&#123;print $2&#125;&#x27;)</span><br></pre></td></tr></table></figure><p>发现报错：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">Removing cuda-toolkit-12-4-config-common (12.4.99-1) ...</span><br><span class="line">Removing alternatives</span><br><span class="line">Purging configuration files for cuda-toolkit-12-4-config-common (12.4.99-1) ...</span><br><span class="line">Removing alternatives</span><br><span class="line">Processing triggers for libc-bin (2.31-0ubuntu9.14) ...</span><br><span class="line">/sbin/ldconfig.real: /usr/lib/wsl/lib/libcuda.so.1 is not a symbolic link</span><br></pre></td></tr></table></figure><p>运行 <code>ls -l /usr/lib/wsl/lib/libcuda.so*</code></p><p>发现对应文件不是一个符号链接</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">-r-xr-xr-x 1 root root 162552 Mar  2 07:04 /usr/lib/wsl/lib/libcuda.so</span><br><span class="line">-r-xr-xr-x 1 root root 162552 Mar  2 07:04 /usr/lib/wsl/lib/libcuda.so.1</span><br><span class="line">-r-xr-xr-x 1 root root 162552 Mar  2 07:04 /usr/lib/wsl/lib/libcuda.so.1.1</span><br></pre></td></tr></table></figure><p>删除错误的 <code>libcuda.so.1</code> 文件：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo rm /usr/lib/wsl/lib/libcuda.so.1</span><br></pre></td></tr></table></figure><p>创建一个新的符号链接，使 <code>libcuda.so.1</code> 指向具体版本的文件，如 <code>libcuda.so.1.1</code>：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ln -s /usr/lib/wsl/lib/libcuda.so.1.1 /usr/lib/wsl/lib/libcuda.so.1</span><br></pre></td></tr></table></figure><p>运行 <code>ldconfig</code> 来更新库的缓存信息：</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo ldconfig</span><br></pre></td></tr></table></figure><p>使用</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">sudo apt-get autoremove</span><br><span class="line">sudo apt-get autoclean</span><br></pre></td></tr></table></figure><p>清理本地存储库里的软件包信息</p><p>重新安装即可</p><h2 id="安装-cudnn"><a class="markdownIt-Anchor" href="#安装-cudnn"></a> 安装 cuDNN</h2><p>还是一样，找到对应的安装文件：<a href="https://developer.nvidia.com/rdp/cudnn-archive%EF%BC%8C%E8%BF%99%E9%87%8C%E9%9C%80%E8%A6%81%E6%B3%A8%E5%86%8C%E7%99%BB%E5%BD%95%E5%90%8E%E6%89%8D%E8%83%BD%E4%B8%8B%E8%BD%BD">https://developer.nvidia.com/rdp/cudnn-archive，这里需要注册登录后才能下载</a></p><p>使用 windows 下载完成后移动到 Ubuntu 系统中。WLS 2 中：</p><ul><li>Linux 文件系统被映射到\wsl$\Ubuntu-20.04\</li><li>Windows 的磁盘被挂载到了/mnt 下，可以直接访问</li></ul><p>完成后通过 <code>sudo dpkg -i NAME</code> 即可安装</p><h2 id="使用-conda-建立对应版本的-python-虚拟环境"><a class="markdownIt-Anchor" href="#使用-conda-建立对应版本的-python-虚拟环境"></a> 使用 conda 建立对应版本的 python 虚拟环境</h2><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">conda create --name myenv python=3.8</span><br><span class="line">conda activate myenv</span><br></pre></td></tr></table></figure><p>之后即可使用对应指令安装对应版本的 TensorFlow</p><figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">pip install tensorflow-gpu==2.11.0</span><br></pre></td></tr></table></figure><h2 id="jupyter"><a class="markdownIt-Anchor" href="#jupyter"></a> Jupyter</h2><p><code>pip install jupyterlab</code></p><p>使用如下命令启动 jupyter lab：<code>jupyter lab --no-browser</code></p><h3 id="测试-tensorflow"><a class="markdownIt-Anchor" href="#测试-tensorflow"></a> 测试 tensorflow</h3><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">import tensorflow as tf</span><br><span class="line">tf.config.list_physical_devices()</span><br></pre></td></tr></table></figure><p>发现报错</p><p><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/image-20240317173159625.png" alt="image-20240317173159625.png" /></p><p>在 windows 桌面右键打开 NVIDIA 控制面板</p><p><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/image-20240317173236552.png" alt="image-20240317173236552.png" /></p><p>将 PhysX 设置修改为指定显卡</p><p><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/image-20240317173257487.png" alt="image-20240317173257487.png" /></p><p>成功解决</p>]]></content>
      
      
      <categories>
          
          <category> 经验 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 经验 </tag>
            
            <tag> 安装 </tag>
            
            <tag> 机器学习 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>基于Nexus的第三方Nuget源搭建</title>
      <link href="/posts/7519/"/>
      <url>/posts/7519/</url>
      
        <content type="html"><![CDATA[<blockquote><p>Nexus 是支持 Nuget、Docker、Npm 等多种包的仓库管理器，可用做私有包的存储分发，缓存官方包。<br /><a href="https://help.sonatype.com/en/sonatype-nexus-repository.html">https://help.sonatype.com/en/sonatype-nexus-repository.html</a></p></blockquote><h1 id="环境需求"><a class="markdownIt-Anchor" href="#环境需求"></a> 环境需求</h1><ul><li>Docker</li></ul><h1 id="安装"><a class="markdownIt-Anchor" href="#安装"></a> 安装</h1><ol><li>创建数据挂载目录并赋予权限 <code>mkdir data &amp;&amp; chown -R 200 data</code></li><li>创建 docker-compose. Yml 文件</li></ol><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">version:</span> <span class="string">&#x27;3.1&#x27;</span></span><br><span class="line"><span class="attr">services:</span></span><br><span class="line">  <span class="attr">nexus:</span></span><br><span class="line">  <span class="comment"># 这里使用latest可能拉不动</span></span><br><span class="line">    <span class="attr">image:</span> <span class="string">m.daocloud.io/docker.io/sonatype/nexus3:3.61.0</span></span><br><span class="line">    <span class="attr">container_name:</span> <span class="string">nexus3</span></span><br><span class="line">    <span class="attr">restart:</span> <span class="string">always</span></span><br><span class="line">    <span class="attr">environment:</span></span><br><span class="line">    <span class="comment"># Nexus 上下文路径</span></span><br><span class="line">       <span class="attr">NEXUS_CONTEXT:</span> <span class="string">/</span>       </span><br><span class="line">    <span class="comment"># 指定jvm参数</span></span><br><span class="line">       <span class="attr">INSTALL4J_ADD_VM_PARAMS:</span> <span class="string">-Xms1g</span> <span class="string">-Xmx1g</span> <span class="string">-XX:MaxDirectMemorySize=3g</span></span><br><span class="line">    <span class="attr">volumes:</span></span><br><span class="line">    <span class="comment"># 本地挂载数据</span></span><br><span class="line">    <span class="bullet">-</span> <span class="string">./data:/nexus-data</span></span><br><span class="line">    <span class="attr">ports:</span></span><br><span class="line">    <span class="comment"># 端口映射</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">&quot;8081:8081&quot;</span></span><br><span class="line">    <span class="attr">networks:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">nexusnetwork</span></span><br><span class="line"></span><br><span class="line"><span class="attr">networks:</span></span><br><span class="line">  <span class="attr">nexusnetwork:</span></span><br><span class="line">    <span class="attr">external:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><ol start="3"><li>运行 <code>docker compose up -d</code></li><li><strong>等待片刻</strong>，nexus 需要时间构建，在此期间访问可能导致 apache 2 占用 8081 接口</li><li>访问 <code>http://${server_address}:8081</code> 即可</li><li>右上角 Login，管理员默认登录密码在 <code>data/admin.password</code>，这里使用 admin + admin. Password 登录后会提示修改密码，<strong>修改后 admin. Password 文件会直接被删除，不要使用原密码!!</strong></li><li>提示可以禁止匿名访问，这样仅有授权用户可以访问资源</li></ol><h1 id="nuget-配置"><a class="markdownIt-Anchor" href="#nuget-配置"></a> Nuget  配置</h1><h2 id="仓库说明"><a class="markdownIt-Anchor" href="#仓库说明"></a> 仓库说明</h2><p>Nexus 有三个默认仓库</p><ul><li>Nuget-group：组合存储库，可以将多个远程或本地存储库组合成一个虚拟存储库，默认包含 nuget-hosted，nuget. Org-proxy。拉取包的地址一般配置此仓库地址</li><li>Nuget-hosted：托管存储库，本地发布的包可以存储到此存储库。推送包的地址需要配置此仓库地址</li><li>Nuget. Org-proxy：代理存储库，缓存 nuget. Org 的包并从本地服务器上提供它们</li></ul><h2 id="权限配置"><a class="markdownIt-Anchor" href="#权限配置"></a> 权限配置</h2><ul><li>点击齿轮可进入设置，在 Roles 中可创建角色，Users 中可创建用户，可以为角色分配相应的不同权限，角色之间也可以互相包含</li></ul><h2 id="nuget-秘钥"><a class="markdownIt-Anchor" href="#nuget-秘钥"></a> Nuget 秘钥</h2><ul><li>点击右上角的 User 图标，可以看到左边第二栏 Nuget API Key<br /><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/image-20250114174013491.png" alt="image-20250114174013491.png" /></li></ul><p>点击 Access API Key，按照提示即可<br /><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/image-20250114174036710.png" alt="image-20250114174036710.png" /></p><p>此时秘钥无法直接使用，需要在设置 Security-&gt; Realms 中启用 NuGet API-Key Realm<br /><a href="https://help.sonatype.com/en/realms.html#Realms-NuGetAPI-KeyRealm">https://help.sonatype.com/en/realms.html#Realms-NuGetAPI-KeyRealm</a><br /><img src="https://raw.githubusercontent.com/Sentixxx/st-pic-base/main/pic/image-20250114174142845.png" alt="image-20250114174142845.png" /></p><h2 id="设置部署策略"><a class="markdownIt-Anchor" href="#设置部署策略"></a> 设置部署策略</h2><p>默认 nuget 包托管是启用了，而为了防止包被恶意篡改，可以将 nuget-hosted 仓库修改为禁用重新部署，多人协同开发时可防止包被被其他人覆盖。在设置了禁用重新部署时，推送重复包的时候将会返回 400 错误<br /><a href="https://help.sonatype.com/en/namespace-confusion-protection.html#NamespaceConfusionProtection-ConfigureNexusRepository3">https://help.sonatype.com/en/namespace-confusion-protection.html#NamespaceConfusionProtection-ConfigureNexusRepository3</a></p>]]></content>
      
      
      <categories>
          
          <category> 经验 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
            <tag> 经验 </tag>
            
            <tag> 安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>告别“搬运式”更新，打造丝滑写作流(Obsidian + Hexo + Github Page)</title>
      <link href="/posts/44007/"/>
      <url>/posts/44007/</url>
      
        <content type="html"><![CDATA[<blockquote><p>如果你在其他平台看到这篇文章，这可能不是最终版本。为了获得更好的阅读体验（包含最新的评论讨论和勘误），欢迎移步<a href="https://blog.sentixx.top/posts/44007">原文</a></p></blockquote><h1 id="写在前面"><a class="markdownIt-Anchor" href="#写在前面"></a> 写在前面</h1><p>作为一个强迫症兼折腾爱好者，我一直梦想有一套完美的博客工作流：<strong>在 Obsidian 里像写日记一样随手记录，然后博客就自动静默发布到了网页上。</strong></p><p>在折腾出这套方案之前，我每天都在重复极其琐碎的体力活：写完 Markdown -&gt; 手动复制到 Hexo 目录 -&gt; 手动敲指令 -&gt; 等待上传。这种低效的流程不仅累，而且极其消磨写作的热情。</p><p>经过持续的踩坑，我终于基本跑通了这套基于 GitHub Actions 的 Obsidian-Hexo 自动化发布方案”。它的核心优势只有三个字：<strong>全自动</strong>。</p><ul><li><strong>写作在 Ob：</strong> 享受 Obsidian 强大的插件和管理能力。</li><li><strong>图床在 Git：</strong> PicGo 配合 GitHub 仓库，图片随粘贴随上传。（这个得小心点，别白嫖太多，图片多了就得买个服务器了，不过那样指不定哪天图片就全 404 了，欢迎分享更好用的方案）</li><li><strong>发布在云端：</strong> 只要我在 Git 提交，GitHub Actions 就会在后台帮我完成所有的编译和部署。</li></ul><p>如果你也受够了手动维护博客的繁琐，想把精力真正回归到“思考”和“写作”本身，那么请收好这份配置指南。</p><blockquote><p>TODO：自动发布到其他社交网站（博客确实没啥人看）</p></blockquote><h1 id="hexo"><a class="markdownIt-Anchor" href="#hexo"></a> Hexo</h1><p>首先进行工具的安装 <code>npm install -g hexo-cli</code></p><p>找一个文件夹，执行</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">hexo init &lt;folder&gt;</span><br><span class="line"><span class="built_in">cd</span> &lt;folder&gt;</span><br><span class="line">npm i</span><br></pre></td></tr></table></figure><p>输入 <code>hexo generate</code> 即可生成静态文件<br />输入 <code>hexo server</code> ，即可在本地访问界面</p><h2 id="设置远端仓库托管"><a class="markdownIt-Anchor" href="#设置远端仓库托管"></a> 设置远端仓库托管</h2><p>GitHub 上建立一个仓库<br />在 hexo 的 folder 打开命令行</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git init</span><br><span class="line">git remote add origin &lt;url&gt;</span><br><span class="line">git add .</span><br><span class="line">git commit -m <span class="string">&quot;Initial commit&quot;</span></span><br><span class="line">git push -u origin master</span><br></pre></td></tr></table></figure><h1 id="github-page"><a class="markdownIt-Anchor" href="#github-page"></a> Github Page</h1><p>同样建立一个仓库，这里需要命名为 <code>{username}.github.io</code></p><ul><li>这是因为 GitHub Pages 具有两种基本的类型：用户/组织页面 (User/Organization Pages) 和项目页面 (Project Pages)<ul><li>用户/组织页面使用一个专门的仓库存放文件，这个仓库必须以你的用户名命名，规则如下：<ul><li>仓库名称必须符合 <code>&lt;username&gt;.github.io</code> 的模式。</li><li>该仓库 <code>master</code> 分支的内容才会用来构建你的 GitHub Pages。</li></ul></li><li>你只能使用自己的用户名来建立用户/组织页面的仓库，形如 <code>joe/bob.github.io</code> 这样的仓库是不行的。</li><li>当用户页面建好之后，可以使用 <code>http(s)://&lt;username&gt;.github.io</code> 来访问。</li></ul></li></ul><p>在 <a href="https://github.com/settings/tokens">Token生成界面</a>选择 “Generate New Token (Classic)”</p><ul><li>选择一个过期时间</li><li>Select Scopes 勾选 repo 中的所有选项</li><li>Generate Token</li></ul><p>复制生成的 Token，注意这里不要直接关闭网页，这个 Token 关闭网页后就会不可见。<br />在托管 hexo folder 的仓库界面打开设置，“Security-&gt; Secret and Variables -&gt; Actions”，新建一个 Respository Secret，将刚刚得到的 Token 粘贴进内容，给它一个名字，这里我叫 ACCESS_TOKEN</p><h2 id="配置-github-workflow"><a class="markdownIt-Anchor" href="#配置-github-workflow"></a> 配置 Github Workflow</h2><p>在 hexo folder 打开 .github 文件夹，新建一个文件夹 workflows，然后创建一个 yml 文件，粘贴如下内容</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Generate</span> <span class="string">Hexo</span> <span class="string">Blog</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="string">master</span></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">source</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="string">&#x27;true&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;22&#x27;</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hexo</span> <span class="string">Environment</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">npm</span> <span class="string">install</span> <span class="string">-g</span> <span class="string">hexo-cli</span></span><br><span class="line">          <span class="string">npm</span> <span class="string">ci</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">pages</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">hexo</span> <span class="string">generate</span></span><br><span class="line">          <span class="string">ls</span> <span class="string">-R</span> <span class="string">public/</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">GitHub</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">cd</span> <span class="string">./public</span></span><br><span class="line">          <span class="string">git</span> <span class="string">init</span></span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.name</span> &#123;<span class="string">username</span>&#125;</span><br><span class="line">          <span class="string">git</span> <span class="string">config</span> <span class="string">--global</span> <span class="string">user.email</span> &#123;<span class="string">useremai</span>&#125;</span><br><span class="line">          <span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line">          <span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">&quot;$<span class="template-variable">&#123;&#123; github.event.head_commit.message &#125;&#125;</span> $(date &#x27;+%Z %Y-%m-%d %H:%M:%S&#x27;) Updated By Github Actions&quot;</span></span><br><span class="line">          <span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">--quiet</span> <span class="string">&quot;https://$<span class="template-variable">&#123;&#123; secrets.ACESS_TOKEN &#125;&#125;</span>@github.com/&#123;username&#125;/&#123;username&#125;.github.io.git&quot;</span> <span class="string">master:main</span></span><br></pre></td></tr></table></figure><p>修改 <code>_config. yml</code></p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">deploy:</span></span><br><span class="line"><span class="attr">type:</span> <span class="string">&#x27;git&#x27;</span></span><br><span class="line"><span class="attr">repository:</span> <span class="string">https://github.com/&#123;username&#125;/&#123;username&#125;.github.io.git</span></span><br><span class="line"><span class="attr">branch:</span> <span class="string">main</span></span><br></pre></td></tr></table></figure><p>提交修改到仓库，就可以看见一个 Action 正在运行，等待片刻后访问之前的个人主页，就可以看到博客界面了。</p><h2 id="配置个人主题"><a class="markdownIt-Anchor" href="#配置个人主题"></a> 配置个人主题</h2><p>这里选用了 <a href="https://github.com/next-theme/hexo-theme-next.git">Next</a> 作为主题，首先需要 fork 上游的仓库，这是因为在我们的 workflow 中会同步子模块，因此如果想要对主题做配置，就需要对仓库的内容进行修改，所以这里 fork 了一个自己的版本便于追踪修改与版本更新</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">git clone &lt;url&gt; themes/next</span><br><span class="line">git add .</span><br><span class="line">git rm --cached -f themes/next</span><br><span class="line">git submodule add &lt;url&gt; themes/next</span><br></pre></td></tr></table></figure><p>分别对两个仓库进行提交，就可以看到主题更新了</p><blockquote><p>后记：后来开摆了，转移到了 Butterfly</p></blockquote><h2 id="rss-配置"><a class="markdownIt-Anchor" href="#rss-配置"></a> RSS 配置</h2><p>在项目根目录下安装 hexo-generator-feed</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-feed --save</span><br></pre></td></tr></table></figure><p>修改项目根目录的_config. Yml，插件添加 hexo-generator-feed，设置 feed 属性</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">Plugins:</span> <span class="string">hexo-generator-feed</span></span><br><span class="line"><span class="comment"># Feed Atom</span></span><br><span class="line"><span class="attr">feed:</span></span><br><span class="line">    <span class="attr">type:</span> <span class="string">atom</span></span><br><span class="line">    <span class="attr">path:</span> <span class="string">atom.xml</span></span><br><span class="line">    <span class="attr">limit:</span> <span class="number">20</span></span><br><span class="line">    <span class="attr">hub:</span></span><br><span class="line">    <span class="attr">content:</span></span><br><span class="line">    <span class="attr">content_limit:</span> <span class="number">140</span></span><br><span class="line">    <span class="attr">content_limit_delim:</span> <span class="string">&quot; &quot;</span></span><br><span class="line">    <span class="attr">order_by:</span> <span class="string">-date</span></span><br><span class="line">    <span class="attr">icon:</span> <span class="string">/images/favicon_200x200.png</span></span><br></pre></td></tr></table></figure><p>修改主题根目录的_config. Yml，添加 RSS 订阅入口</p><ul><li>修改<strong>social</strong>节点，添加一行启用 RSS 图标</li></ul><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">social:</span></span><br><span class="line"><span class="comment"># 其他社交按钮</span></span><br><span class="line"><span class="attr">RSS:</span> <span class="string">/atom.xml</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-rss</span></span><br></pre></td></tr></table></figure><ul><li>修改<strong>follow_me</strong>节点，开启 RSS 订阅入口</li></ul><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="attr">follow_me:</span></span><br><span class="line"><span class="comment"># 其他社交按钮</span></span><br><span class="line"><span class="attr">RSS:</span> <span class="string">/atom.xml</span> <span class="string">||</span> <span class="string">fa</span> <span class="string">fa-rss</span></span><br></pre></td></tr></table></figure><h1 id="obsidian"><a class="markdownIt-Anchor" href="#obsidian"></a> Obsidian</h1><p>综合调研了网上的各种 Obsidian 方案，始终没有找到满意的，于是决定自己搞</p><p>既然已经通过 Github 托管了博客，我们也希望一起将 Obsidian 中的文档托管</p><h2 id="obsidian-git"><a class="markdownIt-Anchor" href="#obsidian-git"></a> Obsidian Git</h2><p>可以下载 Obsidian 中的插件 Git，很多博客中都叫 Obsidian Git，因为 Obisidian 的规则原因，现在已经改名叫 Git，配置过程大同小异这里就不多讲了。</p><h3 id="配置备份"><a class="markdownIt-Anchor" href="#配置备份"></a> 配置备份</h3><p>这里可以配置一个工作流来进行自动备份，防止出现一些误操作导致文件丢失</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Scheduled</span> <span class="string">Backup</span> <span class="string">to</span> <span class="string">bkp</span> <span class="string">branch</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="comment"># 每天凌晨 2 点运行（UTC 时间，需根据时区调整）</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&#x27;0 2 * * *&#x27;</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span>  <span class="comment"># 支持手动触发</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">backup:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line"></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">source</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Set</span> <span class="string">up</span> <span class="string">Git</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git config --global user.name &quot;GitHub Actions&quot;</span></span><br><span class="line"><span class="string">          git config --global user.email &quot;github-actions@users.noreply.github.com&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Check</span> <span class="string">and</span> <span class="string">create</span> <span class="string">bkp</span> <span class="string">branch</span> <span class="string">if</span> <span class="string">not</span> <span class="string">exists</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          # 拉取所有分支</span></span><br><span class="line"><span class="string">          git fetch origin</span></span><br><span class="line"><span class="string"></span>          </span><br><span class="line">          <span class="comment"># 检查远程是否存在 bkp 分支</span></span><br><span class="line">          <span class="string">if</span> <span class="string">!</span> <span class="string">git</span> <span class="string">ls-remote</span> <span class="string">--heads</span> <span class="string">origin</span> <span class="string">bkp;</span> <span class="string">then</span></span><br><span class="line">            <span class="string">echo</span> <span class="string">&quot;bkp branch does not exist, creating it...&quot;</span></span><br><span class="line">            <span class="string">git</span> <span class="string">checkout</span> <span class="string">--orphan</span> <span class="string">bkp</span>  <span class="comment"># 创建孤立分支</span></span><br><span class="line">            <span class="string">git</span> <span class="string">rm</span> <span class="string">-rf</span> <span class="string">.</span>              <span class="comment"># 清空内容</span></span><br><span class="line">            <span class="string">git</span> <span class="string">commit</span> <span class="string">--allow-empty</span> <span class="string">-m</span> <span class="string">&quot;Initialize bkp branch&quot;</span></span><br><span class="line">            <span class="string">git</span> <span class="string">push</span> <span class="string">origin</span> <span class="string">bkp</span>       <span class="comment"># 推送到远程</span></span><br><span class="line">          <span class="string">else</span></span><br><span class="line">            <span class="string">echo</span> <span class="string">&quot;bkp branch exists, fetching it...&quot;</span></span><br><span class="line">            <span class="string">git</span> <span class="string">checkout</span> <span class="string">bkp</span>          <span class="comment"># 切换到 bkp 分支</span></span><br><span class="line">          <span class="string">fi</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Backup</span> <span class="string">changes</span> <span class="string">to</span> <span class="string">bkp</span> <span class="string">branch</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          # 确保当前在 bkp 分支</span></span><br><span class="line"><span class="string">          git checkout bkp</span></span><br><span class="line"><span class="string">          git reset --hard origin/main  # 用 main 分支内容覆盖</span></span><br><span class="line"><span class="string"></span>          </span><br><span class="line">          <span class="comment"># 提交更改</span></span><br><span class="line">          <span class="string">git</span> <span class="string">add</span> <span class="string">.</span></span><br><span class="line">          <span class="string">git</span> <span class="string">commit</span> <span class="string">-m</span> <span class="string">&quot;Scheduled Backup from main ($(date &#x27;+%Z %Y-%m-%d %H:%M:%S&#x27;))&quot;</span> <span class="string">||</span> <span class="string">echo</span> <span class="string">&quot;No changes to commit.&quot;</span></span><br><span class="line">          </span><br><span class="line">          <span class="comment"># 推送到远程 bkp 分支</span></span><br><span class="line">          <span class="string">git</span> <span class="string">push</span> <span class="string">--force</span> <span class="string">&quot;https://$<span class="template-variable">&#123;&#123; secrets.ACCESS_TOKEN &#125;&#125;</span>@github.com/$<span class="template-variable">&#123;&#123; github.repository &#125;&#125;</span>.git&quot;</span> <span class="string">bkp</span></span><br></pre></td></tr></table></figure><p>在配置好 Obisidian 文档的 Git 仓库后，我们将其添加为 Hexo 仓库的子模块:</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">git submodule addd &lt;url&gt; <span class="built_in">source</span></span><br></pre></td></tr></table></figure><p>再通过修改 Hexo 的配置来排除一些你不希望渲染的文件，这里可以参考 Hexo 的配置规则，如下所示</p><h2 id="hexo-配置规则"><a class="markdownIt-Anchor" href="#hexo-配置规则"></a> Hexo 配置规则</h2><h3 id="包括或不包括目录和文件"><a class="markdownIt-Anchor" href="#包括或不包括目录和文件"></a> 包括或不包括目录和文件</h3><p>使用以下选项可明确处理或忽略某些文件/文件夹。 可以使用 <a href="https://github.com/micromatch/micromatch#extended-globbing">glob 表达式</a> 进行路径匹配。</p><p><code>include</code> 和 <code>exclude</code> 选项只会应用到 <code>source/</code> ，而 <code>ignore</code> 选项会应用到所有文件夹.</p><table><thead><tr><th>设置</th><th>描述</th></tr></thead><tbody><tr><td><code>include</code></td><td>包含隐藏文件（包括名称以下划线开头的文件/文件夹，* 除外）</td></tr><tr><td><code>exclude</code></td><td>排除文件或文件夹</td></tr><tr><td><code>ignore</code></td><td>忽略文件/文件夹</td></tr></tbody></table><p>例如：</p><figure class="highlight yml"><table><tr><td class="code"><pre><span class="line"><span class="comment"># 处理或不处理目录或文件  </span></span><br><span class="line"><span class="attr">include:</span>  </span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;.nojekyll&quot;</span>  </span><br><span class="line">  <span class="comment"># 处理 &#x27;source/css/_typing.css&#x27;  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;css/_typing.css&quot;</span>  </span><br><span class="line">  <span class="comment"># 处理 &#x27;source/_css/&#x27; 中的任何文件，但不包括子目录及其其中的文件。  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;_css/*&quot;</span>  </span><br><span class="line">  <span class="comment"># 处理 &#x27;source/_css/&#x27; 中的任何文件和子目录下的任何文件。  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;_css/**/*&quot;</span>  </span><br><span class="line">  </span><br><span class="line"><span class="attr">exclude:</span>  </span><br><span class="line">  <span class="comment"># 不处理 &#x27;source/js/test.js&#x27;。  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;js/test.js&quot;</span>  </span><br><span class="line">  <span class="comment"># 不处理 &#x27;source/js/&#x27; 中的文件、但包括子目录下的所有目录和文件。  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;js/*&quot;</span>  </span><br><span class="line">  <span class="comment"># 不处理 &#x27;source/js/&#x27; 中的文件和子目录下的任何文件。  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;js/**/*&quot;</span>  </span><br><span class="line">  <span class="comment"># 不处理 &#x27;source/js/&#x27; 目录下的所有文件名以 &#x27;test&#x27; 开头的文件，但包括其它文件和子目录下的单文件。  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;js/test*&quot;</span>  </span><br><span class="line">  <span class="comment"># 不处理 &#x27;source/js/&#x27; 及其子目录中任何以 &#x27;test&#x27; 开头的文件。  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;js/**/test*&quot;</span>  </span><br><span class="line">  <span class="comment"># 不要用 exclude 来忽略 &#x27;source/_posts/&#x27; 中的文件。  </span></span><br><span class="line">  <span class="comment"># 你应该使用 &#x27;skip_render&#x27;。 或者在要忽略的文件的文件名之前加一个下划线 &#x27;_&#x27;。  </span></span><br><span class="line">  <span class="comment"># - &quot;_posts/hello-world.md&quot; # 在这里配置是没有用的。  </span></span><br><span class="line">  </span><br><span class="line"><span class="attr">ignore:</span>  </span><br><span class="line">  <span class="comment"># 忽略任何一个名叫 &#x27;foo&#x27; 的文件夹。  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;**/foo&quot;</span>  </span><br><span class="line">  <span class="comment"># 只忽略 &#x27;themes/&#x27; 下的 &#x27;foo&#x27; 文件夹。  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;**/themes/*/foo&quot;</span>  </span><br><span class="line">  <span class="comment"># 对 &#x27;themes/&#x27; 目录下的每个文件夹中忽略名叫 &#x27;foo&#x27; 的子文件夹。  </span></span><br><span class="line">  <span class="bullet">-</span> <span class="string">&quot;**/themes/**/foo&quot;</span></span><br></pre></td></tr></table></figure><p>列表中的每一项都必须用单引号或双引号包裹起来。</p><p><code>include</code> 和 <code>exclude</code> 并不适用于 <code>themes/</code> 目录下的文件。 如果需要忽略 <code>themes/</code> 目录下的部分文件或文件夹，可以使用 <code>ignore</code> 或在文件名之前添加下划线 <code>_</code>。</p><p><code>source/_posts</code> 文件夹是一个例外，但该文件夹下任何名称以 <code>_</code> 开头的文件或文件夹仍会被忽略。不建议在该文件夹中使用 <code>include</code> 规则。</p><h2 id="配置自动更新工作流"><a class="markdownIt-Anchor" href="#配置自动更新工作流"></a> 配置自动更新工作流</h2><p>这里我们期望的流程是这样的：“在 Obisidian 中写文章” -&gt; “文章自动同步到 Git” -&gt; “Git Workflow 根据标志查询是否更新发布到网页&quot; -&gt; “通知 hexo 仓库进行编译发布” -&gt; “hexo 将编译结果发布到网页所在的静态仓库”</p><p>我们之前已经配好了 Obisidian 的 Git 同步模块，那么接下来要做的就是 <code>“Git Workflow 根据标志查询是否更新发布到网页&quot; -&gt; &quot;通知 hexo 仓库进行编译发布&quot;</code> 这一步了，可以使用以下工作流来解决：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Noitfy</span> <span class="string">by</span> <span class="string">push</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">main</span>]</span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">&quot;contains(github.event.head_commit.message, &#x27;sync&#x27;)&quot;</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Notify</span> <span class="string">repository</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">curl</span> <span class="string">-XPOST</span> <span class="string">-u</span> &#123;<span class="string">your_name</span>&#125;<span class="string">:$&#123;&#123;</span> <span class="string">secrets.ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span> <span class="string">-H</span> <span class="string">&quot;Content-Type: application/json&quot;</span> <span class="string">https://api.github.com/repos/&#123;your_name&#125;/&#123;your_hexo_repo&#125;/dispatches</span> <span class="string">--data</span> <span class="string">&#x27;&#123;&quot;event_type&quot;: &quot;deploy&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>这里我设置的比较简单，会自动检测提交的 <code>commit message</code> 中是否含有设置的关键词进行发布，同时，设置一个周期的自动更新工作流:</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Check</span> <span class="string">Commit</span> <span class="string">Interval</span> <span class="string">and</span> <span class="string">Trigger</span> <span class="string">Workflow</span></span><br><span class="line"></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">schedule:</span></span><br><span class="line">    <span class="bullet">-</span> <span class="attr">cron:</span> <span class="string">&#x27;0 0 * * *&#x27;</span> <span class="comment"># 每天运行一次</span></span><br><span class="line">  <span class="attr">workflow_dispatch:</span> <span class="comment"># 支持手动触发</span></span><br><span class="line"></span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">check-commit-interval:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">Code</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v3</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Get</span> <span class="string">Latest</span> <span class="string">Commit</span> <span class="string">Date</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          # 获取最新 commit 的时间</span></span><br><span class="line"><span class="string">          LATEST_COMMIT_DATE=$(git log -1 --format=%ci)</span></span><br><span class="line"><span class="string">          echo &quot;Latest Commit Date: $LATEST_COMMIT_DATE&quot;</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">          <span class="comment"># 获取当前时间</span></span><br><span class="line">          <span class="string">CURRENT_DATE=$(date</span> <span class="string">-u</span> <span class="string">+&quot;%Y-%m-%d</span> <span class="string">%H:%M:%S&quot;)</span></span><br><span class="line">          <span class="string">echo</span> <span class="string">&quot;Current Date: $CURRENT_DATE&quot;</span></span><br><span class="line"></span><br><span class="line">          <span class="comment"># 计算时间差（天数）</span></span><br><span class="line">          <span class="string">DIFF_DAYS=$((</span> <span class="string">($(date</span> <span class="string">-d</span> <span class="string">&quot;$CURRENT_DATE&quot;</span> <span class="string">+%s)</span> <span class="bullet">-</span> <span class="string">$(date</span> <span class="string">-d</span> <span class="string">&quot;$LATEST_COMMIT_DATE&quot;</span> <span class="string">+%s))</span> <span class="string">/</span> <span class="number">86400</span> <span class="string">))</span></span><br><span class="line">          <span class="string">echo</span> <span class="string">&quot;Time Difference: $DIFF_DAYS days&quot;</span></span><br><span class="line"></span><br><span class="line">          <span class="comment"># 设置 DIFF_DAYS 变量</span></span><br><span class="line">          <span class="string">echo</span> <span class="string">&quot;DIFF_DAYS=$DIFF_DAYS&quot;</span> <span class="string">&gt;&gt;</span> <span class="string">$GITHUB_ENV</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Trigger</span> <span class="string">Workflow</span></span><br><span class="line">        <span class="attr">if:</span> <span class="string">env.DIFF_DAYS</span> <span class="string">&gt;</span> <span class="number">3</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line">          <span class="string">curl</span> <span class="string">-XPOST</span> <span class="string">-u</span> &#123;<span class="string">your_name</span>&#125;<span class="string">:$&#123;&#123;</span> <span class="string">secrets.ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span> <span class="string">-H</span> <span class="string">&quot;Content-Type: application/json&quot;</span> <span class="string">https://api.github.com/repos/&#123;your_name&#125;/&#123;your_hexo_repo&#125;/dispatches</span> <span class="string">--data</span> <span class="string">&#x27;&#123;&quot;event_type&quot;: &quot;deploy&quot;&#125;&#x27;</span></span><br></pre></td></tr></table></figure><p>这样设置之后，原先的发布工作流其实会出现一些问题，为此，将其修改：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">Generate</span> <span class="string">Hexo</span> <span class="string">Blog</span></span><br><span class="line"><span class="attr">on:</span></span><br><span class="line">  <span class="attr">push:</span></span><br><span class="line">    <span class="attr">branches:</span> [<span class="string">main</span>]</span><br><span class="line"><span class="attr">jobs:</span></span><br><span class="line">  <span class="attr">build:</span></span><br><span class="line">    <span class="attr">runs-on:</span> <span class="string">ubuntu-latest</span></span><br><span class="line">    <span class="attr">if:</span> <span class="string">&quot;!contains(github.event.head_commit.message, &#x27;Updated By Github Actions&#x27;)&quot;</span></span><br><span class="line">    <span class="attr">steps:</span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Checkout</span> <span class="string">source</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/checkout@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">token:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.ACCESS_TOKEN</span> <span class="string">&#125;&#125;</span></span><br><span class="line">          <span class="attr">submodules:</span> <span class="literal">true</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Node.js</span></span><br><span class="line">        <span class="attr">uses:</span> <span class="string">actions/setup-node@v4</span></span><br><span class="line">        <span class="attr">with:</span></span><br><span class="line">          <span class="attr">node-version:</span> <span class="string">&#x27;22&#x27;</span></span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Setup</span> <span class="string">Hexo</span> <span class="string">Environment</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          npm install -g hexo-cli</span></span><br><span class="line"><span class="string">          npm ci</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Update</span> <span class="string">submodule</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git config --global user.name &quot;Github Actions&quot;</span></span><br><span class="line"><span class="string">          git config --global user.email &quot;github-actions@users.noreply.github.com&quot;</span></span><br><span class="line"><span class="string">          git submodule update --remote</span></span><br><span class="line"><span class="string">          git add source/</span></span><br><span class="line"><span class="string">          git commit -m &quot;Update submodule ($(date &#x27;+%Z %Y-%m-%d %H:%M:%S&#x27;) Updated By Github Actions)&quot; || exit 0</span></span><br><span class="line"><span class="string">          git push &quot;https://$&#123;&#123; secrets.ACCESS_TOKEN &#125;&#125;@github.com/&#123;your_name&#125;/&#123;hexo_repo&#125;&quot; main || exit 0</span></span><br><span class="line"><span class="string"></span>          </span><br><span class="line"></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Generate</span> <span class="string">pages</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          git clone https://github.com/&#123;your_name&#125;/&#123;pages_repo&#125; public</span></span><br><span class="line"><span class="string">          ls -R public/</span></span><br><span class="line"><span class="string">          hexo generate</span></span><br><span class="line"><span class="string"></span></span><br><span class="line">      <span class="bullet">-</span> <span class="attr">name:</span> <span class="string">Deploy</span> <span class="string">to</span> <span class="string">GitHub</span> <span class="string">Pages</span></span><br><span class="line">        <span class="attr">run:</span> <span class="string">|</span></span><br><span class="line"><span class="string">          cd ./public</span></span><br><span class="line"><span class="string">          git add .</span></span><br><span class="line"><span class="string">          git commit -m &quot;$&#123;&#123; github.event.head_commit.message &#125;&#125; ($(date &#x27;+%Z %Y-%m-%d %H:%M:%S&#x27;) Updated By Github Actions)&quot;</span></span><br><span class="line"><span class="string">          git push --force &quot;https://$&#123;&#123; secrets.ACCESS_TOKEN &#125;&#125;@github.com/&#123;your_name&#125;/&#123;pages_repo&#125;&quot; main</span></span><br></pre></td></tr></table></figure><h2 id="配置模板以适用于-front-matter"><a class="markdownIt-Anchor" href="#配置模板以适用于-front-matter"></a> 配置模板以适用于 Front Matter</h2><p>Hexo 在进行渲染时会自动对文章的 Front Matter 进行解析以实现各种功能</p><blockquote><p><a href="https://hexo.io/zh-cn/docs/front-matter">https://hexo.io/zh-cn/docs/front-matter</a></p></blockquote><p>在 Obsidian 中下载插件 Templater ，并自定义一个 Template 文件用于控制 Hexo 的渲染<br />我的文件是这么写的：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">---</span><br><span class="line"></span><br><span class="line">title: &lt;% tp.file.title %&gt;</span><br><span class="line"></span><br><span class="line">date: &lt;% tp.file.creation_date() %&gt;</span><br><span class="line"></span><br><span class="line">updated: &lt;% tp.file.last_modified_date() %&gt;</span><br><span class="line"></span><br><span class="line">tags:</span><br><span class="line"></span><br><span class="line">categories:</span><br><span class="line"></span><br><span class="line">description:</span><br><span class="line"></span><br><span class="line">from:</span><br><span class="line"></span><br><span class="line">aliases:</span><br><span class="line"></span><br><span class="line">published: false</span><br><span class="line"></span><br><span class="line">comments: false</span><br><span class="line"></span><br><span class="line">---</span><br></pre></td></tr></table></figure><h2 id="渲染引擎"><a class="markdownIt-Anchor" href="#渲染引擎"></a> 渲染引擎</h2><p>为了支持更多的语法和数学公式，需要对渲染引擎进行替换：</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm un hexo-renderer-marked --save</span><br><span class="line">npm i hexo-renderer-markdown-it-plus --save</span><br></pre></td></tr></table></figure><h2 id="obsidian双链语法支持"><a class="markdownIt-Anchor" href="#obsidian双链语法支持"></a> Obsidian双链语法支持</h2><p><a href="https://github.com/uuanqin/hexo-filter-titlebased-link">插件地址</a></p><h1 id="配置图床"><a class="markdownIt-Anchor" href="#配置图床"></a> 配置图床</h1><p>根据<a href="https://picgo.github.io/PicGo-Core-Doc/zh/guide/#%E7%89%B9%E6%80%A7">文档</a> 我们使用指令下载 CLI</p><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install picgo -g</span><br><span class="line"></span><br><span class="line">picgo <span class="built_in">set</span> uploader</span><br></pre></td></tr></table></figure><p>在 git 创建一个公有仓库，并像前面一样，设置密钥，按照提示填入<br />这里要注意不要填入域名，否则生成的图片会指向域名</p><h3 id="obisidian-自动上传"><a class="markdownIt-Anchor" href="#obisidian-自动上传"></a> Obisidian 自动上传</h3><p>下载插件 Image Auto Upload，选择 picgo-core 模式即可</p><h1 id="外链禁止跳转"><a class="markdownIt-Anchor" href="#外链禁止跳转"></a> 外链禁止跳转</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-external-link --save</span><br></pre></td></tr></table></figure><p>在 <code>_config.yml</code> 中启用即可</p><h1 id="添加搜索"><a class="markdownIt-Anchor" href="#添加搜索"></a> 添加搜索</h1><figure class="highlight bash"><table><tr><td class="code"><pre><span class="line">npm install hexo-generator-search --save</span><br></pre></td></tr></table></figure><p>然后在 <code>_config.yml</code> 中设置</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">path:</span> <span class="string">search.xml</span></span><br><span class="line">  <span class="attr">content:</span> <span class="literal">true</span></span><br><span class="line">  <span class="attr">field:</span> <span class="string">post</span></span><br></pre></td></tr></table></figure><p>并在 <code>_config.butterfly.yml</code> 中设置</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">search:</span></span><br><span class="line">  <span class="attr">use:</span> <span class="string">local_search</span></span><br><span class="line">  <span class="attr">placeholder:</span> <span class="string">搜索</span></span><br><span class="line">  <span class="comment"># Local Search</span></span><br><span class="line">  <span class="attr">local_search:</span></span><br><span class="line">    <span class="attr">enable:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Preload the search data when the page loads.</span></span><br><span class="line">    <span class="attr">preload:</span> <span class="literal">true</span></span><br><span class="line">    <span class="comment"># Show top n results per article, show all results by setting to -1</span></span><br><span class="line">    <span class="attr">top_n_per_article:</span> <span class="number">1</span></span><br><span class="line">    <span class="comment"># Unescape html strings to the readable one.</span></span><br><span class="line">    <span class="attr">unescape:</span> <span class="literal">false</span></span><br><span class="line">    <span class="attr">CDN:</span></span><br></pre></td></tr></table></figure><h1 id="代码高亮"><a class="markdownIt-Anchor" href="#代码高亮"></a> 代码高亮</h1><p>笔记发布后，发现代码高亮失效，切换到 next 主题后，发现代码又正常染色了<br />因此很快将问题定位到 Butterfly 主题<br />在 Github 上寻找(相关问题)[<a href="https://github.com/jerryc127/hexo-theme-butterfly/issues/245">https://github.com/jerryc127/hexo-theme-butterfly/issues/245</a>]<br />照做，将 <code>_config.yml</code> 中的 <code>hljs</code> 改成 <code>false</code>，问题解决。</p><h1 id="公式渲染"><a class="markdownIt-Anchor" href="#公式渲染"></a> 公式渲染</h1><p>这里根据主题文档的<a href="https://butterfly.js.org/posts/4aa8abbe/?highlight=%E5%85%AC%E5%BC%8F#Math-%E6%95%B8%E5%AD%B8">描述</a>，从 <a href="https://github.com/upupming/hexo-renderer-markdown-it-plus"><code>@upupming/hexo-renderer-markdown-it-plus</code></a> 处获取了最新版的渲染引擎，并且切换到 <code>katex</code> 上，问题得以解决</p><h1 id="配置评论"><a class="markdownIt-Anchor" href="#配置评论"></a> 配置评论</h1><p>使用 <a href="https://giscus.app">https://giscus.app</a> , 无需部署，还是一样白嫖 github 的服务器<br />按照 app 里的提示创建好 discussion, 然后将输出的值填入 <code>_config.butterfly.yml</code> 中</p><figure class="highlight js"><table><tr><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://giscus.app/client.js&quot;</span></span><br><span class="line">        data-repo=<span class="string">&quot;Sentixxx/Sentixxx.github.io&quot;</span></span><br><span class="line">        data-repo-id=<span class="string">&quot;repo-id&quot;</span></span><br><span class="line">        data-category=<span class="string">&quot;Announcements&quot;</span></span><br><span class="line">        data-category-id=<span class="string">&quot;category-id&quot;</span></span><br><span class="line">        data-mapping=<span class="string">&quot;url&quot;</span></span><br><span class="line">        data-strict=<span class="string">&quot;1&quot;</span></span><br><span class="line">        data-reactions-enabled=<span class="string">&quot;1&quot;</span></span><br><span class="line">        data-emit-metadata=<span class="string">&quot;0&quot;</span></span><br><span class="line">        data-input-position=<span class="string">&quot;top&quot;</span></span><br><span class="line">        data-theme=<span class="string">&quot;preferred_color_scheme&quot;</span></span><br><span class="line">        data-lang=<span class="string">&quot;zh-CN&quot;</span></span><br><span class="line">        data-loading=<span class="string">&quot;lazy&quot;</span></span><br><span class="line">        crossorigin=<span class="string">&quot;anonymous&quot;</span></span><br><span class="line">        <span class="keyword">async</span>&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">giscus:</span></span><br><span class="line"><span class="attr">repo:</span> <span class="string">Sentixxx/Sentixxx.github.io</span></span><br><span class="line"><span class="attr">repo_id:</span> </span><br><span class="line"><span class="attr">category_id:</span> </span><br><span class="line"><span class="attr">light_theme:</span> <span class="string">light</span></span><br><span class="line"><span class="attr">dark_theme:</span> <span class="string">dark</span></span><br><span class="line"><span class="attr">js:</span></span><br><span class="line"><span class="attr">option:</span></span><br></pre></td></tr></table></figure><p>虽然但是，这里并没有给额外的，应该填在哪里呢？根据<a href="https://github.com/jerryc127/hexo-theme-butterfly/discussions/944">回答</a>，其实其他属性直接填进 options 就好了，也就是这样</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">giscus:</span></span><br><span class="line"><span class="attr">repo:</span> <span class="string">Sentixxx/Sentixxx.github.io</span></span><br><span class="line"><span class="attr">repo_id:</span> <span class="string">R_kgDONuW2Fw</span></span><br><span class="line"><span class="attr">category_id:</span> <span class="string">DIC_kwDONuW2F84C2aTW</span></span><br><span class="line"><span class="attr">light_theme:</span> <span class="string">light</span></span><br><span class="line"><span class="attr">dark_theme:</span> <span class="string">dark</span></span><br><span class="line"><span class="attr">js:</span></span><br><span class="line"><span class="attr">option:</span></span><br><span class="line"><span class="attr">data-mapping:</span> <span class="string">url</span></span><br><span class="line"><span class="attr">data-strict:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">data-reactions-enabled:</span> <span class="number">1</span></span><br><span class="line"><span class="attr">data-loading:</span> <span class="string">lazy</span></span><br></pre></td></tr></table></figure><p>这样配完再启动，就会发现……还是没有评论<br />——其实是要在 <code>comments</code> 下面设置：</p><figure class="highlight yaml"><table><tr><td class="code"><pre><span class="line"><span class="attr">comments:</span></span><br><span class="line"><span class="attr">use:</span> <span class="string">Giscus</span></span><br></pre></td></tr></table></figure><p>然后就可以评论了</p><h1 id="to-be-continued"><a class="markdownIt-Anchor" href="#to-be-continued"></a> To Be Continued</h1>]]></content>
      
      
      <categories>
          
          <category> 经验 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 经验 </tag>
            
            <tag> 安装 </tag>
            
        </tags>
      
    </entry>
    
    
    
    <entry>
      <title>渲染测试</title>
      <link href="/posts/3c4a82e6/"/>
      <url>/posts/3c4a82e6/</url>
      
        <content type="html"><![CDATA[<p>【提示：Github 中 Front-matter 以表格形式显示】</p><h1 id="简介"><a class="markdownIt-Anchor" href="#简介"></a> 简介</h1><h2 id="文章使用方法"><a class="markdownIt-Anchor" href="#文章使用方法"></a> 文章使用方法</h2><p>这原本是一篇 Typora 下使用 Markdown 语法的案例实践分享，最早创建于 2021 年 11 月之前，于 2023 年 6 月大改。本篇文章使用 Markdown 标记语法编写而成，汇聚了常用 Markdown 语法标注。对于不同目标人群有不同的作用：</p><ul><li>对于 Markdown 学习者。可以获取文章源码（Github 仓库地址在下面），并使用你的本地编辑器打开。通过对比标记语言与渲染结果直接学习。如果你不喜欢这种 MarkDown 学习方式，你可以参考 GitHub 学习相关 Markdown 规范：<a href="https://docs.github.com/zh/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax">基本撰写和格式语法 - GitHub 文档</a></li><li>对于其他人。这篇文章包含不同标准 Markdown 语法，你可以在任何 Markdown 编辑器打开以测试其渲染效果。<ul><li>比如说——你。你使用什么方式看到这篇文章，就了解到你所用的软件对 Markdown 语言的支持情况。如果你通过我的博客打开，那么你看到的就是 Hexo 渲染后的结果（至少目前时是这样）。</li><li>比如说——我，笔记重度依赖。我需要对比本地编辑器的渲染器与 Hexo 各类渲染器和插件对 Markdown 的支持程度，以培养合适的写作习惯，加强核心工作流的可移植性。</li></ul></li></ul><p>文章目前可预览的在线版本：</p><ul><li>Hexo 渲染网页：<a href="https://uuanqin.top/p/3c4a82e6/">Markdown渲染测试 | 半方池水半方田 (uuanqin.top)</a>。源文件直接通过 Hexo 渲染生成的静态网页。</li><li>Github 仓库： <a href="https://github.com/uuanqin/Markdown-Grammar-Rendering-Test">https://github.com/uuanqin/Markdown-Grammar-Rendering-Test</a> 。源文件的副本，不定期与 Hexo 本地同步。</li></ul><h2 id="markdown-标准"><a class="markdownIt-Anchor" href="#markdown-标准"></a> Markdown 标准</h2><p>约翰·格鲁伯在 2004 年创造了 Markdown 语言，<a href="https://daringfireball.net/projects/markdown/">Daring Fireball: Markdown</a>。格鲁伯认为不应完全标准化：「不同的网站（和人们）有不同的需求。没有一种语法可以让所有人满意。<sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>」</p><p>下文将从 Commonmark、GFM 为基础分板块进行 Markdown 渲染测试。</p><p>此外，对一些 Markdown 编辑器语法进行展示。其中，本文使用的 Typora 版本为 1.8.10，Obsidian 版本为 1.6.7。</p><h1 id="基础commonmark"><a class="markdownIt-Anchor" href="#基础commonmark"></a> 基础（CommonMark）</h1><p>这一部分测试 Markdown 基础语法，参考自 <a href="https://commonmark.org/">CommonMark</a>。这部分内容的成功渲染（除了下面的段落部分）是本文结构不至于散乱的基础（比如上文的标题、超链接、列表等的正确渲染）。</p><p>（第一段）这是一个很长很长很长很长的段落。</p><p>只有隔一个空行才能分锻，有点像 Latex。</p><p>在 CommonMark 语法中这三句话是一长句的。</p><p>【提示】在 Typora、Obsidian 中是换行了，这样做是有好处的。</p><p>（第二段）这是一个很长很长很长很长的段落。</p><p>与上一段之间隔了一个空行。</p><p>（第三段）这是一个很长很长很长很长的段落。\</p><p>反斜杠也能起到换行的作用。\</p><p>【提示】Typora、Obsidian 不需要这个符号，这样做会很方便。</p><h1 id="一级标题类-atx-形式"><a class="markdownIt-Anchor" href="#一级标题类-atx-形式"></a> 一级标题（类 Atx 形式）</h1><h2 id="二级标题类-atx-形式"><a class="markdownIt-Anchor" href="#二级标题类-atx-形式"></a> 二级标题（类 Atx 形式）</h2><h3 id="三级标题类-atx-形式"><a class="markdownIt-Anchor" href="#三级标题类-atx-形式"></a> 三级标题（类 Atx 形式）</h3><h1 id="一级标题类-setext-形式"><a class="markdownIt-Anchor" href="#一级标题类-setext-形式"></a> 一级标题（类 Setext 形式）</h1><h2 id="二级标题类-setext-形式"><a class="markdownIt-Anchor" href="#二级标题类-setext-形式"></a> 二级标题（类 Setext 形式）</h2><p>【提示】Obsidian 支持类 Setext 形式的标题，请在浏览模式下查看。</p><p><em>斜体（星号表示）</em>  <em>斜体（下划线表示）</em></p><p><strong>粗体（星号表示）</strong> <strong>粗体（下划线表示）</strong></p><blockquote><p>引言</p><blockquote><p>二级引言</p></blockquote><p>引言</p></blockquote><ul><li>无序列表 使用横线</li></ul><ul><li>无序列表 使用星号</li></ul><ol><li>有序列表 使用数字加点</li></ol><ol start="2"><li>有序列表 使用数字加右括号</li></ol><p>【提示】Obsidian 中有序列表有区别。</p><ul><li><p>网状列表</p><ol><li>元素 1</li><li>元素 2</li></ol></li><li><p>网状列表</p><ul><li>使用横线</li></ul><ul><li>使用星号</li></ul></li></ul><p><a href="http://b.org">链接（方括号后加圆括号）</a></p><p><a href="http://b.org">带参考的链接 1</a> 链接外文字 <a href="http://b.org">带参考链接 2</a> 链接外文字</p><p>链接悬停提示写法：<a href="https://a.com" title="hint">Title</a></p><p><img src="https://commonmark.org/help/images/favicon.png" alt="图片链接" /></p><p><img src="https://commonmark.org/help/images/favicon.png" alt="图片链接带脚注" title=" 图片标题 " /></p><p>【提示】Obsidian 在浏览模式下正常，在编辑模式有点迷惑，这是由它们的链接特色决定的。</p><p>行内代码 <code>Inline Code</code> 行内代码（单个反引号包裹）</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"># 代码块（三个反引号包裹）</span><br></pre></td></tr></table></figure><pre><code>代码块（四个空格开头）代码块（紧挨上一行）</code></pre><p>【提示】Obsidian 这里的代码块在浏览模式下没有区别</p><p>减号式下划线：</p><hr /><p>星号式下划线：</p><hr /><h1 id="github-flavored-markdowngfm"><a class="markdownIt-Anchor" href="#github-flavored-markdowngfm"></a> GitHub Flavored Markdown（GFM）</h1><p>GitHub Flavored Markdown, often shortened as GFM, is the dialect of Markdown that is currently supported for user content on <a href="http://GitHub.com">GitHub.com</a> and GitHub Enterprise.</p><h2 id="基本格式语法"><a class="markdownIt-Anchor" href="#基本格式语法"></a> 基本格式语法</h2><p>这里只介绍 <a href="https://docs.github.com/zh/get-started/writing-on-github/getting-started-with-writing-and-formatting-on-github/basic-writing-and-formatting-syntax">基本撰写和格式语法 - GitHub 文档</a> 提及的规范。</p><p>与 CommonMark 对比新增了以下语法：</p><h4 id="支持四级标题类-atx-形式井号方式"><a class="markdownIt-Anchor" href="#支持四级标题类-atx-形式井号方式"></a> 支持四级标题（类 Atx 形式，井号方式）</h4><h5 id="支持五级标题类-atx-形式井号方式"><a class="markdownIt-Anchor" href="#支持五级标题类-atx-形式井号方式"></a> 支持五级标题（类 Atx 形式，井号方式）</h5><h6 id="支持六级标题类-atx-形式井号方式"><a class="markdownIt-Anchor" href="#支持六级标题类-atx-形式井号方式"></a> 支持六级标题（类 Atx 形式，井号方式）</h6><p><s>删除线（两条波浪线）</s></p><p><strong>粗体和嵌入 _ 斜体 _</strong>   两个星号内下划线括住。【提示】Obsidian 支持内嵌斜体，请在浏览模式打开。</p><p><em><strong>全部粗体和斜体（三个星号）</strong></em></p><p>使用<sub>下标</sub></p><p>使用<sup>上标</sup></p><ul><li>加号创建的无序列表</li></ul><p>任务列表展示：</p><ul><li>[x] 任务列表</li><li>[ ] 任务列表</li></ul><p>表情符号（使用冒号括住） 👍   😄【提示】Obsidian 不支持，但是可以直接输入😯</p><p>脚注。使用此括号 <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup> 语法为您的内容 <sup class="footnote-ref"><a href="#fn3" id="fnref3">[3]</a></sup> 添加脚注。</p><p>【提示】Obsidian 会把脚注自动放到页面后。</p><p>支持转义符（反引号）忽略 Markdown 格式。</p><p>以下符号可以转义（<a href="https://daringfireball.net/projects/markdown/syntax">Daring Fireball: Markdown Syntax Documentation</a>）</p><p>\   backslash</p><p>`   backtick</p><p>*   asterisk</p><p>_   underscore</p><p>{}  curly braces</p><p>[]  square brackets</p><p>()  parentheses</p><p>支持 Markdown 的隐藏渲染：</p><!-- This content will not appear in the rendered Markdown --><p>【提示】Typora 处理仅仅是标黄，Obsidian 支持。</p><h2 id="高级格式"><a class="markdownIt-Anchor" href="#高级格式"></a> 高级格式</h2><p>如果你正在使用 Typora 预览，建议打开偏好设置调整以支持更多语法。</p><h3 id="表格"><a class="markdownIt-Anchor" href="#表格"></a> 表格</h3><p>表格末尾的竖线可选。单元格的宽度可以不同，无需在列内准确对齐。 标题行的第一列中必须至少有三个横线。可借助 <a href="https://www.tablesgenerator.com/markdown_tables">在线表格生成工具</a> 生成表格。</p><p>可以在表格中使用格式，例如链接、内联代码块和文本样式。</p><table><thead><tr><th>First Header</th><th>Second Header</th></tr></thead><tbody><tr><td>Content Cell</td><td>Content <strong>Cell</strong></td></tr><tr><td><a href="https://docs.github.com/zh/get-started/writing-on-github/working-with-advanced-formatting/organizing-information-with-tables">Content Cell</a></td><td><em>Content</em> Cell</td></tr><tr><td><code>Content Cell</code></td><td><em><strong>Content</strong></em> Cell</td></tr></tbody></table><p>可以通过在标题行中连字符的左侧、右侧或两侧添加冒号 <code>:</code>，来靠左、靠右或居中对齐列中的文本。</p><p>若要包含竖线 <code>|</code> 作为单元格中的内容，请在竖线前使用 <code>\</code></p><table><thead><tr><th style="text-align:left">Left-aligned</th><th style="text-align:center">Center-aligned</th><th style="text-align:right">Right-aligned</th></tr></thead><tbody><tr><td style="text-align:left">git status</td><td style="text-align:center">git status</td><td style="text-align:right">git status</td></tr><tr><td style="text-align:left">git diff</td><td style="text-align:center">`</td><td style="text-align:right">git diff |</td></tr></tbody></table><h3 id="折叠部分"><a class="markdownIt-Anchor" href="#折叠部分"></a> 折叠部分</h3><details><summary>CLICK ME</summary><p><h4 id="we-can-hide-anything-even-code"><a class="markdownIt-Anchor" href="#we-can-hide-anything-even-code"></a> We can hide anything, even code!</h4><figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line">puts <span class="string">&quot;Hello World&quot;</span></span><br></pre></td></tr></table></figure></p></details><p>【提示】Typora ，Obsidian 不支持。</p><h3 id="代码块"><a class="markdownIt-Anchor" href="#代码块"></a> 代码块</h3><p>要在围栏代码块中显示三重倒引号，请将其包在四个倒引号内。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">```</span><br><span class="line">Look! You can see my backticks.</span><br><span class="line">```</span><br></pre></td></tr></table></figure><p>支持语法高亮（使用 <a href="https://github.com/github-linguist/linguist">github-linguist/linguist: Language Savant. </a>）</p><figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">def</span> <span class="title function_">main</span>():</span><br><span class="line"><span class="built_in">print</span>(<span class="string">&quot;Hello World!&quot;</span>)</span><br></pre></td></tr></table></figure><p>使用代码块在 Markdown 中创建关系图。 GitHub 支持 Mermaid、GeoJSON、TopoJSON 和 ASCII STL 语法。</p><p>Mermaid 是一款受 Markdown 启发的工具，可将文本呈现为关系图。 例如，Mermaid 可以呈现流程图、序列图、饼图等。 有关详细信息，请参阅 <a href="https://mermaid-js.github.io/mermaid/#/">Mermaid 文档</a>。如果你的 Markdown 渲染器支持渲染的话，你应该看到下面流程图。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph TD;</span><br><span class="line">    A--&gt;B;</span><br><span class="line">    A--&gt;C;</span><br><span class="line">    B--&gt;D;</span><br><span class="line">    C--&gt;D;</span><br></pre></td></tr></table></figure><p>可使用 GeoJSON 或 TopoJSON 语法创建交互式地图。 若要创建地图，请使用 <code>geojson</code> 或 <code>topojson</code> 语法标识符在围栏代码块中添加 GeoJSON 或 TopoJSON。如果你的 Markdown 渲染器支持渲染的话，你应该看到下面两幅图。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;type&quot;: &quot;FeatureCollection&quot;,</span><br><span class="line">  &quot;features&quot;: [</span><br><span class="line">    &#123;</span><br><span class="line">      &quot;type&quot;: &quot;Feature&quot;,</span><br><span class="line">      &quot;id&quot;: 1,</span><br><span class="line">      &quot;properties&quot;: &#123;</span><br><span class="line">        &quot;ID&quot;: 0</span><br><span class="line">      &#125;,</span><br><span class="line">      &quot;geometry&quot;: &#123;</span><br><span class="line">        &quot;type&quot;: &quot;Polygon&quot;,</span><br><span class="line">        &quot;coordinates&quot;: [</span><br><span class="line">          [</span><br><span class="line">              [-90,35],</span><br><span class="line">              [-90,30],</span><br><span class="line">              [-85,30],</span><br><span class="line">              [-85,35],</span><br><span class="line">              [-90,35]</span><br><span class="line">          ]</span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;type&quot;: &quot;Topology&quot;,</span><br><span class="line">  &quot;transform&quot;: &#123;</span><br><span class="line">    &quot;scale&quot;: [0.0005000500050005, 0.00010001000100010001],</span><br><span class="line">    &quot;translate&quot;: [100, 0]</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;objects&quot;: &#123;</span><br><span class="line">    &quot;example&quot;: &#123;</span><br><span class="line">      &quot;type&quot;: &quot;GeometryCollection&quot;,</span><br><span class="line">      &quot;geometries&quot;: [</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;type&quot;: &quot;Point&quot;,</span><br><span class="line">          &quot;properties&quot;: &#123;&quot;prop0&quot;: &quot;value0&quot;&#125;,</span><br><span class="line">          &quot;coordinates&quot;: [4000, 5000]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;type&quot;: &quot;LineString&quot;,</span><br><span class="line">          &quot;properties&quot;: &#123;&quot;prop0&quot;: &quot;value0&quot;, &quot;prop1&quot;: 0&#125;,</span><br><span class="line">          &quot;arcs&quot;: [0]</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">          &quot;type&quot;: &quot;Polygon&quot;,</span><br><span class="line">          &quot;properties&quot;: &#123;&quot;prop0&quot;: &quot;value0&quot;,</span><br><span class="line">            &quot;prop1&quot;: &#123;&quot;this&quot;: &quot;that&quot;&#125;</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;arcs&quot;: [[1]]</span><br><span class="line">        &#125;</span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;arcs&quot;: [[[4000, 0], [1999, 9999], [2000, -9999], [2000, 9999]],[[0, 0], [0, 9999], [2000, 0], [0, -9999], [-2000, 0]]]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>GFM 可以直接在 Markdown 中使用 ASCII STL 语法来创建交互式 3D 模型。 若要显示模型，请使用 <code>stl</code> 语法标识符在围栏代码块中添加 ASCII STL 语法。如果你的 Markdown 渲染器支持渲染的话，应该看到一个立方体而不是代码块。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">solid cube_corner</span><br><span class="line">  facet normal 0.0 -1.0 0.0</span><br><span class="line">    outer loop</span><br><span class="line">      vertex 0.0 0.0 0.0</span><br><span class="line">      vertex 1.0 0.0 0.0</span><br><span class="line">      vertex 0.0 0.0 1.0</span><br><span class="line">    endloop</span><br><span class="line">  endfacet</span><br><span class="line">  facet normal 0.0 0.0 -1.0</span><br><span class="line">    outer loop</span><br><span class="line">      vertex 0.0 0.0 0.0</span><br><span class="line">      vertex 0.0 1.0 0.0</span><br><span class="line">      vertex 1.0 0.0 0.0</span><br><span class="line">    endloop</span><br><span class="line">  endfacet</span><br><span class="line">  facet normal -1.0 0.0 0.0</span><br><span class="line">    outer loop</span><br><span class="line">      vertex 0.0 0.0 0.0</span><br><span class="line">      vertex 0.0 0.0 1.0</span><br><span class="line">      vertex 0.0 1.0 0.0</span><br><span class="line">    endloop</span><br><span class="line">  endfacet</span><br><span class="line">  facet normal 0.577 0.577 0.577</span><br><span class="line">    outer loop</span><br><span class="line">      vertex 1.0 0.0 0.0</span><br><span class="line">      vertex 0.0 1.0 0.0</span><br><span class="line">      vertex 0.0 0.0 1.0</span><br><span class="line">    endloop</span><br><span class="line">  endfacet</span><br><span class="line">endsolid</span><br></pre></td></tr></table></figure><p>【提示】Typora、Obsidian 不支持 <code>geojson</code> 、 <code>topojson</code> 或 <code>ASCII STL</code> 语法。</p><h3 id="数学表达式"><a class="markdownIt-Anchor" href="#数学表达式"></a> 数学表达式</h3><p>内联表达式：This sentence uses <code>$</code> delimiters to show math inline:  <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mrow><mn>3</mn><mi>x</mi><mo>−</mo><mn>1</mn></mrow></msqrt><mo>+</mo><mo stretchy="false">(</mo><mn>1</mn><mo>+</mo><mi>x</mi><msup><mo stretchy="false">)</mo><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">\sqrt{3x-1}+(1+x)^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.17444499999999996em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8655550000000001em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">3</span><span class="mord mathdefault">x</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mord">1</span></span></span><span style="top:-2.825555em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.17444499999999996em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mopen">(</span><span class="mord">1</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:1.064108em;vertical-align:-0.25em;"></span><span class="mord mathdefault">x</span><span class="mclose"><span class="mclose">)</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span></p><p>要以块的形式添加数学表达式，请启动一个新行，并使用两个美元符号 <code>$$</code> 分隔表达式。</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mrow><mo fence="true">(</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msub><mi>a</mi><mi>k</mi></msub><msub><mi>b</mi><mi>k</mi></msub><mo fence="true">)</mo></mrow><mn>2</mn></msup><mo>≤</mo><mrow><mo fence="true">(</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msubsup><mi>a</mi><mi>k</mi><mn>2</mn></msubsup><mo fence="true">)</mo></mrow><mrow><mo fence="true">(</mo><munderover><mo>∑</mo><mrow><mi>k</mi><mo>=</mo><mn>1</mn></mrow><mi>n</mi></munderover><msubsup><mi>b</mi><mi>k</mi><mn>2</mn></msubsup><mo fence="true">)</mo></mrow></mrow><annotation encoding="application/x-tex">\left( \sum_{k=1}^n a_k b_k \right)^2 \leq \left( \sum_{k=1}^n a_k^2 \right) \left( \sum_{k=1}^n b_k^2 \right)</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:3.2561210000000003em;vertical-align:-1.302113em;"></span><span class="minner"><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">(</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.300005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.302113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.33610799999999996em;"><span style="top:-2.5500000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.15em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">)</span></span></span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:1.954008em;"><span style="top:-4.2029000000000005em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">≤</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:3.0521130000000003em;vertical-align:-1.302113em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">(</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.300005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.302113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">)</span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="minner"><span class="mopen delimcenter" style="top:0em;"><span class="delimsizing size4">(</span></span><span class="mop op-limits"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:1.6513970000000002em;"><span style="top:-1.8478869999999998em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span><span class="mrel mtight">=</span><span class="mord mtight">1</span></span></span></span><span style="top:-3.0500049999999996em;"><span class="pstrut" style="height:3.05em;"></span><span><span class="mop op-symbol large-op">∑</span></span></span><span style="top:-4.300005em;margin-left:0em;"><span class="pstrut" style="height:3.05em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight">n</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:1.302113em;"><span></span></span></span></span></span><span class="mspace" style="margin-right:0.16666666666666666em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.8641079999999999em;"><span style="top:-2.4530000000000003em;margin-left:0em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mathdefault mtight" style="margin-right:0.03148em;">k</span></span></span><span style="top:-3.113em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.247em;"><span></span></span></span></span></span></span><span class="mclose delimcenter" style="top:0em;"><span class="delimsizing size4">)</span></span></span></span></span></span></span></p><p>或者，可以使用 <code>math</code> 代码块语法将数学表达式显示为块。 使用此语法时，无需使用 <code>$$</code> 分隔符。【提示】Typora、Obsidian 不支持。</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">\sqrt&#123;3&#125;</span><br></pre></td></tr></table></figure><p>表示美元符号：</p><ul><li>在数学表达式内，在显式 <code>$</code> 之前添加一个 <code>\</code> 符号。<ul><li>This expression uses <code>\$</code> to display a dollar sign: <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msqrt><mrow><mi mathvariant="normal">$</mi><mn>4</mn></mrow></msqrt></mrow><annotation encoding="application/x-tex">\sqrt{\$4}</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1.04em;vertical-align:-0.10777999999999999em;"></span><span class="mord sqrt"><span class="vlist-t vlist-t2"><span class="vlist-r"><span class="vlist" style="height:0.93222em;"><span class="svg-align" style="top:-3em;"><span class="pstrut" style="height:3em;"></span><span class="mord" style="padding-left:0.833em;"><span class="mord">$</span><span class="mord">4</span></span></span><span style="top:-2.89222em;"><span class="pstrut" style="height:3em;"></span><span class="hide-tail" style="min-width:0.853em;height:1.08em;"><svg width='400em' height='1.08em' viewBox='0 0 400000 1080' preserveAspectRatio='xMinYMin slice'><path d='M95,702c-2.7,0,-7.17,-2.7,-13.5,-8c-5.8,-5.3,-9.5,-10,-9.5,-14c0,-2,0.3,-3.3,1,-4c1.3,-2.7,23.83,-20.7,67.5,-54c44.2,-33.3,65.8,-50.3,66.5,-51c1.3,-1.3,3,-2,5,-2c4.7,0,8.7,3.3,12,10s173,378,173,378c0.7,0,35.3,-71,104,-213c68.7,-142,137.5,-285,206.5,-429c69,-144,104.5,-217.7,106.5,-221c5.3,-9.3,12,-14,20,-14H400000v40H845.2724s-225.272,467,-225.272,467s-235,486,-235,486c-2.7,4.7,-9,7,-19,7c-6,0,-10,-1,-12,-3s-194,-422,-194,-422s-65,47,-65,47z M834 80H400000v40H845z'/></svg></span></span></span><span class="vlist-s">​</span></span><span class="vlist-r"><span class="vlist" style="height:0.10777999999999999em;"><span></span></span></span></span></span></span></span></span></li></ul></li><li>在数学表达式之外，但在同一行上，在显式 <code>$</code> 两边使用 span 标记。<ul><li>To split <span>$</span>100 in half, we calculate <span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi mathvariant="normal">​</mi><mn>100</mn><mi mathvariant="normal">/</mi><mn>2</mn></mrow><annotation encoding="application/x-tex">​100/2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:1em;vertical-align:-0.25em;"></span><span class="mord">​</span><span class="mord">1</span><span class="mord">0</span><span class="mord">0</span><span class="mord">/</span><span class="mord">2</span></span></span></span></li><li>【提示】Typora 不支持。</li></ul></li></ul><p>如果你还想学习更多，请看 <a href="https://github.github.com/gfm/">GitHub Flavored Markdown Spec</a></p><p>在网页上以文本的形式展示数学公式，只需要一个 LaTeX 的子集能渲染数学公式即可。KaTeX 就是这样一个支持 HTML 的轻量级的数学公式引擎。因此，在网页中编写数学公式应注意使用兼容性更广的语法。</p><h1 id="typora"><a class="markdownIt-Anchor" href="#typora"></a> Typora</h1><p><strong>Typora</strong> 使用 GFM，其特色在于“WYSIWYG”，其有自己特色的语法渲染。</p><p>使用类 Setext 形式 (<a href="https://en.wikipedia.org/wiki/Setext">Setext - Wikipedia</a>) 创建标题。注意使用 Shift+Enter 换行。（有线）</p><p>使用类 Atx 形式创建标题，一共可以有 6 个级别。（井号）</p><p>使用 <code>[TOC]</code> 创建目录：</p><p>[TOC]</p><p>分割线使用三个以上符号（最后一个使用了标签）。符号中间可以插入空格。</p><hr /><hr /><hr /><hr /><hr /><hr /><hr /><p><kbd>Esc</kbd></p><p>段落的换行是使用两个以上的空格加回车（在 Typora 编辑器里是<kbd>Shift</kbd>+<kbd>Enter</kbd>）</p><p>或者使用 HTML 标签<br>进行换行</p><p>不要吝惜回车，在一些情况下回车会被吞掉！</p><p>代码块内还能高亮：</p><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Here&#x27;s an example:</span><br><span class="line"></span><br><span class="line">```js</span><br><span class="line">function test() &#123;</span><br><span class="line">  console.log(&quot;notice the blank line before this function?&quot;);</span><br><span class="line">&#125;</span><br><span class="line">```</span><br><span class="line"></span><br><span class="line">syntax highlighting:</span><br><span class="line">```ruby</span><br><span class="line">require &#x27;redcarpet&#x27;</span><br><span class="line">markdown = Redcarpet.new(&quot;Hello World!&quot;)</span><br><span class="line">puts markdown.to_html</span><br><span class="line">```</span><br></pre></td></tr></table></figure><p>Typora now supports <a href="http://jekyllrb.com/docs/frontmatter/">YAML Front Matter</a>. Input <code>---</code> at the top of the article and then press <code>Return</code> to introduce a metadata block. Alternatively, you can insert a metadata block from the top menu of Typora. 这里就不演示了哈，弄 Hexo 的喜闻乐见。</p><p>支持有标题的 Link，试试鼠标停留在上面：<a href="http://example.com/" title="Title">an example</a></p><p>Typora allows you to insert URLs as links, wrapped by <code>&lt;</code>brackets<code>&gt;</code>.</p><p><code>&lt;i@typora.io&gt;</code> becomes <a href="mailto:i@typora.io">i@typora.io</a>.</p><p>Typora will also automatically link standard URLs. e.g: <a href="http://www.google.com">www.google.com</a>. 就是没有任何标记也解析出地址了。</p><p>Underline is powered by raw HTML.</p><p>支持下划线：<code>&lt;u&gt;下划线&lt;/u&gt;</code> becomes <u>下划线</u>.</p><p>支持上下标（在偏好设置中设置）：H<sub>2</sub>O  X<sup>2</sup></p><p>支持高亮：<mark>highlight</mark></p><h1 id="obsidian-flavored-markdownofm"><a class="markdownIt-Anchor" href="#obsidian-flavored-markdownofm"></a> Obsidian Flavored Markdown（OFM）</h1><p>Obsidian 是一个基于 Markdown 进行记录的知识库软件，特点在于支持笔记的双向链接。因此，有自己的独特语法。</p><p>Obsidian 努力让 Obsidian 的语法不偏离正统的 Markdown 语法太多。总的来看，Obsidian 的语法大多还是基于 CommonMark，包括了一些 GitHub Flavored Markdown（GFM）和 LaTeX，以及 Obsidian<strong>特有的</strong>语法。</p><table><thead><tr><th>Syntax</th><th>Description</th></tr></thead><tbody><tr><td><strong>[[ ]]</strong></td><td><a href="https://help.obsidian.md/Linking+notes+and+files/Internal+links">Internal links</a></td></tr><tr><td><strong>![[ ]]</strong></td><td><a href="https://help.obsidian.md/Linking+notes+and+files/Embedding+files">Embedding files</a></td></tr><tr><td><code>%%</code></td><td><a href="https://help.obsidian.md/Editing+and+formatting/Basic+formatting+syntax#Comments">Comments</a></td></tr><tr><td><code>&gt; [!note]</code></td><td><a href="https://help.obsidian.md/Editing+and+formatting/Callouts">Callouts</a></td></tr></tbody></table><p>提示：为防止其他插件影响，Embedding files 的示例含转义字符。</p><p>Obsidian doesn’t support Markdown syntax or blank lines within HTML blocks.</p><p>参考：</p><ul><li><a href="https://publish.obsidian.md/help-zh/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/%E6%A0%BC%E5%BC%8F%E5%8C%96%E4%BD%A0%E7%9A%84%E7%AC%94%E8%AE%B0">格式化你的笔记 - Obsidian 中文帮助 - Obsidian Publish</a></li><li><a href="https://help.obsidian.md/Editing+and+formatting/Obsidian+Flavored+Markdown">Obsidian Flavored Markdown - Obsidian Help</a></li></ul><h2 id="internal-links-内部链接"><a class="markdownIt-Anchor" href="#internal-links-内部链接"></a> Internal links 内部链接</h2><p>通过 <strong>[[ ]]</strong> 来链接库中任意一个文件。</p><p>链接一篇笔记：例如 [[双链渲染测试]]。</p><p>你可以将图片或者音频等附件嵌入到你的笔记中。嵌入文件的语法为 <strong>![[文件名.png]]</strong></p><p>你可以通过相同的语法将 PDF 文件嵌入到你的笔记中。除此之外，你可以通过 <strong>![[My File.pdf#page=number]]</strong> 这样的形式直接指定嵌入 PDF 文件的页码。</p><p>由于 Markdown 兼容 HTML，因此你可以使用“iframe”将网页嵌入到笔记中。</p><blockquote><p>这个语法实际受到了 Markdown 相关语法的启发：</p><ol><li>在 Markdown 中，[Image](link.png) 可以让链接指向图片，而 ![Image](link.png) 能让图片嵌入到当前文档中。</li><li>而 <a href="https://publish.obsidian.md/help-zh/%E4%BD%BF%E7%94%A8%E6%8C%87%E5%8D%97/%E5%86%85%E9%83%A8%E9%93%BE%E6%8E%A5">内部链接</a> 的语法则基于以下设定：[[My page]] 是 [My page](My page) 的一个便捷写法（或者是“语法糖”）。</li></ol><p>综上，我们可以得到 ![[My page]] 应该等效于 ![My page](My page)。</p><p>当然，我们也可以使用其他形式的语法。比如，Roam Research 的嵌入语法为 <code>&#123;&#123;embed: ((NODE_ID))&#125;&#125;</code>。我们曾经想过使用 <code>((Page name))</code> 这样的形式来表示嵌入，但后来我们认为还是 <strong>![[Page Name]]</strong> 的形式能更好地与其他语法保持一致，便于记忆，同时也能减少符号的占用，让其他符号能够表示其他含义。</p></blockquote><p>你可以通过以下语法调整嵌入到笔记中的图片的大小：</p><p>Markdown 风格的嵌入，使用 <strong>![AltText|100x100](<a href="https://url/to/image.png">https://url/to/image.png</a>)</strong> 这样的语法。</p><p>一般的嵌入，使用 <strong>![[image.png|100x100]]</strong> 这样的语法。</p><p>如果要根据图像的宽高比例进行缩放，请省略高度，如 <strong>![[image.png|100]]</strong>。</p><p><a href="https://publish.obsidian.md/help-zh/%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/%E4%BD%BF%E7%94%A8+obsidian+URI">Obsidian URI</a> 可以让你在其他应用或 Obsidian 的其他库中打开当前库的某篇笔记。</p><p>比如，你可以通过以下方式跳转到某个库中的某篇笔记（请注意 <a href="https://publish.obsidian.md/help-zh/%E9%AB%98%E7%BA%A7%E7%94%A8%E6%B3%95/%E4%BD%BF%E7%94%A8+obsidian+URI#%E7%BC%96%E7%A0%81">URI 的编码</a>）：</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">[<span class="string">打开某篇笔记</span>](<span class="link">obsidian://open?path=D:%2Fpath%2Fto%2Ffile.md</span>)</span><br></pre></td></tr></table></figure><p>如果 url 中含有空格的话，空格需要转义为 <code>%20</code>，如：</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">[<span class="string">Export options</span>](<span class="link">Pasted%20image</span>)</span><br></pre></td></tr></table></figure><p>示例：<a href="Pasted%20image">Export options</a></p><p>当然，你也可以用 <code>&lt;&gt;</code> 将空格包含起来，如：</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">[<span class="string">Slides Demo</span>](<span class="link">&lt;Slides Demo&gt;</span>)</span><br></pre></td></tr></table></figure><p>示例：[Slides Demo](<Slides Demo>)</p><h2 id="comments-注释"><a class="markdownIt-Anchor" href="#comments-注释"></a> Comments 注释</h2><p>所谓注释，指的是会在编辑模式中显示，但不会在预览模式中显示的内容。使用 <code>%%</code> 可以将内容变为注释。以下为语法：</p><figure class="highlight md"><table><tr><td class="code"><pre><span class="line">这里是行内注释：%%预览模式下你将看不到这句话%%</span><br><span class="line"></span><br><span class="line">这里是跨行注释：</span><br><span class="line">%%</span><br><span class="line">所谓跨行</span><br><span class="line">就是可以有很多行</span><br><span class="line">%%</span><br></pre></td></tr></table></figure><p>以下为示例：</p><p>这里是行内注释：%% 预览模式下你将看不到这句话%%</p><p>这里是跨行注释：</p><p>%%<br />所谓跨行<br />就是可以有很多行<br />%%</p><h2 id="标注-callouts"><a class="markdownIt-Anchor" href="#标注-callouts"></a> 标注 Callouts</h2><p>参考：<a href="https://help.obsidian.md/Editing+and+formatting/Callouts">Callouts</a></p><blockquote><p>GFM 也存在类似的语法：<a href="https://docs.github.com/en/contributing/style-guide-and-content-model/style-guide">Style guide - GitHub Docs</a><br />Microsoft 也有类似的语法，详看后文。</p></blockquote><p>支持以下类型：</p><ul><li>note</li><li>abstract, summary, tldr</li><li>info</li><li>todo</li><li>tip, hint, important</li><li>success, check, done</li><li>question, help, faq</li><li>warning, caution, attention</li><li>failure, fail, missing</li><li>danger, error</li><li>bug</li><li>example</li><li>quote, cite</li></ul><div class="callout" data-callout="any"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pencil"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg></div><div class="callout-title-inner">Any</div></div><div class="callout-content"><p>当类型不在列表中时。</p></div></div><div class="callout" data-callout="note"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pencil"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="abstract"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard-list"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg></div><div class="callout-title-inner">Abstract</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="summary"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard-list"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg></div><div class="callout-title-inner">Summary</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="tldr"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-clipboard-list"><rect width="8" height="4" x="8" y="2" rx="1" ry="1"/><path d="M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2"/><path d="M12 11h4"/><path d="M12 16h4"/><path d="M8 11h.01"/><path d="M8 16h.01"/></svg></div><div class="callout-title-inner">Tldr</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="info"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg></div><div class="callout-title-inner">Info</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="todo"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-circle-2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg></div><div class="callout-title-inner">Todo</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="tip"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="hint"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg></div><div class="callout-title-inner">Hint</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="important"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="success"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><path d="M20 6 9 17l-5-5"/></svg></div><div class="callout-title-inner">Success</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="check"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><path d="M20 6 9 17l-5-5"/></svg></div><div class="callout-title-inner">Check</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="done"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><path d="M20 6 9 17l-5-5"/></svg></div><div class="callout-title-inner">Done</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="question"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-help-circle"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg></div><div class="callout-title-inner">Question</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="help"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-help-circle"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg></div><div class="callout-title-inner">Help</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="faq"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-help-circle"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg></div><div class="callout-title-inner">Faq</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="warning"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg></div><div class="callout-title-inner">Warning</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="caution"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg></div><div class="callout-title-inner">Caution</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="attention"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg></div><div class="callout-title-inner">Attention</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="failure"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></div><div class="callout-title-inner">Failure</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="fail"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></div><div class="callout-title-inner">Fail</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="missing"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-x"><path d="M18 6 6 18"/><path d="m6 6 12 12"/></svg></div><div class="callout-title-inner">Missing</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="danger"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div><div class="callout-title-inner">Danger</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="error"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div><div class="callout-title-inner">Error</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="bug"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-bug"><path d="m8 2 1.88 1.88"/><path d="M14.12 3.88 16 2"/><path d="M9 7.13v-1a3.003 3.003 0 1 1 6 0v1"/><path d="M12 20c-3.3 0-6-2.7-6-6v-3a4 4 0 0 1 4-4h4a4 4 0 0 1 4 4v3c0 3.3-2.7 6-6 6"/><path d="M12 20v-9"/><path d="M6.53 9C4.6 8.8 3 7.1 3 5"/><path d="M6 13H2"/><path d="M3 21c0-2.1 1.7-3.9 3.8-4"/><path d="M20.97 5c0 2.1-1.6 3.8-3.5 4"/><path d="M22 13h-4"/><path d="M17.2 17c2.1.1 3.8 1.9 3.8 4"/></svg></div><div class="callout-title-inner">Bug</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="example"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg></div><div class="callout-title-inner">Example</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="quote"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-quote"><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"/></svg></div><div class="callout-title-inner">Quote</div></div><div class="callout-content"><p>Lorem ipsum dolor sit amet</p></div></div><div class="callout" data-callout="cite"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-quote"><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"/></svg></div><div class="callout-title-inner">Cite</div></div><div class="callout-content"><p></p></div></div><p>折叠：</p><details class="callout" data-callout="question" data-callout-fold="-"><summary class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-help-circle"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg></div><div class="callout-title-inner">折叠尝试（无折叠内容）</div><div class="callout-fold"></div></summary><div class="callout-content"><p></p></div></details><details class="callout" data-callout="cite" data-callout-fold="-"><summary class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-quote"><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"/></svg></div><div class="callout-title-inner">折叠尝试（默认关）</div><div class="callout-fold"></div></summary><div class="callout-content"><p>折叠内容</p></div></details><details class="callout" data-callout="success" data-callout-fold="-"><summary class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check"><path d="M20 6 9 17l-5-5"/></svg></div><div class="callout-title-inner">折叠尝试（默认开）</div><div class="callout-fold"></div></summary><div class="callout-content"><p>折叠内容</p></div></details><p>在不打断笔记流的情况下使用标注附加内容。</p><div class="callout" data-callout="info"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-info"><circle cx="12" cy="12" r="10"/><path d="M12 16v-4"/><path d="M12 8h.01"/></svg></div><div class="callout-title-inner">Info</div></div><div class="callout-content"><p>默认标题<br />Here’s a callout block.<br />It supports <strong>Markdown</strong>, <em>Wikilinks and embeds</em>!</p><p>无序列表：</p><ul><li>项目 1</li></ul><p>有序列表：</p><ol><li>项目 a</li></ol></div></div><div class="callout" data-callout="tip"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg></div><div class="callout-title-inner">自定义标题</div></div><div class="callout-content"><p>公式渲染：</p><p><span class="katex-display"><span class="katex"><span class="katex-mathml"><math><semantics><mrow><mi>r</mi><mo>+</mo><mi>v</mi><mo>−</mo><mi>e</mi><mo>=</mo><mn>2</mn></mrow><annotation encoding="application/x-tex">r+v-e=2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.02778em;">r</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.66666em;vertical-align:-0.08333em;"></span><span class="mord mathdefault" style="margin-right:0.03588em;">v</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">−</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.43056em;vertical-align:0em;"></span><span class="mord mathdefault">e</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.64444em;vertical-align:0em;"></span><span class="mord">2</span></span></span></span></span></p><p>行内代码：<code>Class&lt;?&gt; class = MyClass.class;</code></p><p>图片：<img src="https://commonmark.org/help/images/favicon.png" alt="图片链接" /></p></div></div><div class="callout" data-callout="error"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-zap"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg></div><div class="callout-title-inner">标题内公式 <span class="katex"><span class="katex-mathml"><math><semantics><mrow><msup><mi>a</mi><mn>2</mn></msup><mo>+</mo><msup><mi>b</mi><mn>2</mn></msup><mo>=</mo><msup><mi>c</mi><mn>2</mn></msup></mrow><annotation encoding="application/x-tex">a^2+b^2=c^2</annotation></semantics></math></span><span class="katex-html" aria-hidden="true"><span class="base"><span class="strut" style="height:0.897438em;vertical-align:-0.08333em;"></span><span class="mord"><span class="mord mathdefault">a</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2222222222222222em;"></span><span class="mbin">+</span><span class="mspace" style="margin-right:0.2222222222222222em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">b</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span><span class="mspace" style="margin-right:0.2777777777777778em;"></span><span class="mrel">=</span><span class="mspace" style="margin-right:0.2777777777777778em;"></span></span><span class="base"><span class="strut" style="height:0.8141079999999999em;vertical-align:0em;"></span><span class="mord"><span class="mord mathdefault">c</span><span class="msupsub"><span class="vlist-t"><span class="vlist-r"><span class="vlist" style="height:0.8141079999999999em;"><span style="top:-3.063em;margin-right:0.05em;"><span class="pstrut" style="height:2.7em;"></span><span class="sizing reset-size6 size3 mtight"><span class="mord mtight">2</span></span></span></span></span></span></span></span></span></span></span>，标题内代码 <code>Hello world!</code></div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="cite"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-quote"><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"/></svg></div><div class="callout-title-inner">标题内图片：<img src="https://commonmark.org/help/images/favicon.png" alt="图片链接" />图片后文字</div></div><div class="callout-content"><p></p></div></div><div class="callout" data-callout="question"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-help-circle"><circle cx="12" cy="12" r="10"/><path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/><path d="M12 17h.01"/></svg></div><div class="callout-title-inner">Can callouts be nested?</div></div><div class="callout-content"><p></p><div class="callout" data-callout="todo"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-check-circle-2"><circle cx="12" cy="12" r="10"/><path d="m9 12 2 2 4-4"/></svg></div><div class="callout-title-inner">Yes!, they can.</div></div><div class="callout-content"><p></p><details class="callout" data-callout="example" data-callout-fold="+" open><summary class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-list"><line x1="8" x2="21" y1="6" y2="6"/><line x1="8" x2="21" y1="12" y2="12"/><line x1="8" x2="21" y1="18" y2="18"/><line x1="3" x2="3.01" y1="6" y2="6"/><line x1="3" x2="3.01" y1="12" y2="12"/><line x1="3" x2="3.01" y1="18" y2="18"/></svg></div><div class="callout-title-inner">You can even use multiple layers of nesting.</div><div class="callout-fold"></div></summary><div class="callout-content"><p></p><details class="callout" data-callout="cite" data-callout-fold="-"><summary class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-quote"><path d="M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z"/><path d="M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z"/></svg></div><div class="callout-title-inner">折叠尝试</div><div class="callout-fold"></div></summary><div class="callout-content"><p>折叠内容</p></div></details></div></details></div></div></div></div><h2 id="其他"><a class="markdownIt-Anchor" href="#其他"></a> 其他</h2><h3 id="图表"><a class="markdownIt-Anchor" href="#图表"></a> 图表</h3><p>Obsidian 通过 <a href="https://mermaid-js.github.io/">Mermaid</a> 及其所提供的 <a href="https://mermaid-js.github.io/mermaid-live-editor">编译器</a> 来为用户提供图表的绘制功能。</p><h1 id="microsoft-learn"><a class="markdownIt-Anchor" href="#microsoft-learn"></a> Microsoft Learn</h1><blockquote><p>参考：<a href="https://learn.microsoft.com/en-us/contribute/content/markdown-reference">Markdown reference for Microsoft Learn - Contributor guide | Microsoft Learn</a></p></blockquote><p>Microsoft Learn 还支持自定义 Markdown 扩展。</p><p>例如：警报（备注、提示、重要提示、提醒、警告）</p><div class="callout" data-callout="note"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-pencil"><path d="M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z"/><path d="m15 5 4 4"/></svg></div><div class="callout-title-inner">Note</div></div><div class="callout-content"><p>Information the user should notice even if skimming.</p></div></div><div class="callout" data-callout="tip"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg></div><div class="callout-title-inner">Tip</div></div><div class="callout-content"><p>Optional information to help a user be more successful.</p></div></div><div class="callout" data-callout="important"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-flame"><path d="M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z"/></svg></div><div class="callout-title-inner">Important</div></div><div class="callout-content"><p>Essential information required for user success.</p></div></div><div class="callout" data-callout="caution"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg></div><div class="callout-title-inner">Caution</div></div><div class="callout-content"><p>Negative potential consequences of an action.</p></div></div><div class="callout" data-callout="warning"><div class="callout-title"><div class="callout-title-icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-alert-triangle"><path d="m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z"/><path d="M12 9v4"/><path d="M12 17h.01"/></svg></div><div class="callout-title-inner">Warning</div></div><div class="callout-content"><p>Dangerous certain consequences of an action.</p></div></div><p>其他语法详见文档：<a href="https://learn.microsoft.com/zh-cn/contribute/markdown-reference">Microsoft Learn 的 Markdown 参考 - Contributor guide | Microsoft Learn</a></p><p>【提示：与 OFM 的 Callouts 语法一致，具体详看 OFM】</p><h1 id="附录"><a class="markdownIt-Anchor" href="#附录"></a> 附录</h1><h2 id="html-支持情况"><a class="markdownIt-Anchor" href="#html-支持情况"></a> HTML 支持情况</h2><iframe height='265' scrolling='no' title='Fancy Animated SVG Menu' src='http://codepen.io/jeangontijo/embed/OxVywj/?height=265&theme-id=0&default-tab=css,result&embed-version=2' frameborder='no' allowtransparency='true' allowfullscreen='true' style='width: 100%;'></iframe><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;video src=&quot;xxx.mp4&quot; /&gt;  # 这个放在Hexo会使后文无法显示，故此处以代码块包围</span><br></pre></td></tr></table></figure><p>可以使用普通的 <code>&lt;img&gt;</code> 标签指定图片的高度与宽度：</p><img src="https://commonmark.org/help/images/favicon.png" width="30%"><h3 id="一般标签"><a class="markdownIt-Anchor" href="#一般标签"></a> 一般标签</h3><p>不在 Markdown 涵盖范围之内的标签，都可以直接在文档里面用 HTML 撰写。</p><p>使用<kbd>Ctrl</kbd>+<kbd>Alt</kbd>+<kbd>A</kbd>快速打开 QQ 截屏工具，这里使用了 <code>&lt;kbd&gt;</code> 标签</p><p>这是<sub>下标</sub>   这是<sup>上标</sup>    换行标签<br>换行了</p><p>标签：</p><p><em>强调的内容 (好像和斜体差不多)</em> [^斜体]   <strong>语气更强 (粗体？)</strong>[^加粗]    <code>代码 scanf()</code>    <var>变量</var>    <cite>引用</cite></p><h3 id="字体-颜色和大小"><a class="markdownIt-Anchor" href="#字体-颜色和大小"></a> 字体、颜色和大小</h3><p><b>粗体文本</b>    <i>斜体文本</i>    <big>大号字体</big>    <small>小号字体</small>    <tt>等宽文本</tt>  <u>下划线</u></p><p><font face="黑体">黑体</font>  <font face="微软雅黑">微软雅黑</font>  <font face="STCAIYUN">华文彩云</font>  <font face="华文行楷" >华文行楷</font>  <font face="时尚中黑" >时尚中黑</font>  （我猜你电脑里装有什么字体就能用什么字体）</p><p><mark>黄色高亮</mark></p><p><font color=#00ffff size=3>#00ffff</font>   <font color=gray size=3>gray 色</font>    <font color=#0099ff size=5 face="黑体">#0099ff size=5 黑体</font></p><p><a href='#color'>附录：颜色名列表</a></p><h3 id="折叠段落"><a class="markdownIt-Anchor" href="#折叠段落"></a> 折叠段落</h3><details><summary>Title</summary>content</details><h3 id="设置锚点"><a class="markdownIt-Anchor" href="#设置锚点"></a> 设置锚点</h3><p><a href='#jump'>点我跳转（Typora 下按住 Ctrl 键点击）</a></p><p><a href="#jump_two">点我跳转2</a></p><p>这里给出两种方法实现锚点</p><p><a name='jump'>跳转到这里</a></p><p><span id = "jump_two">跳转到这里 2</span></p><h3 id="表格-2"><a class="markdownIt-Anchor" href="#表格-2"></a> 表格</h3><table><tbody>    <tr>        <th rowspan="3">我占了三行</th>        <th><font color="Green">第一列</font></th>        <th>第二列</th>        <th>第三列</th>    </tr>    <tr>        <td bgcolor="Tomato">第一列</td>        <td>第二列</td>        <td>第三列</td>    </tr>    <tr>        <td>第一列</td>        <td>第二列</td>        <td>第三列</td>    </tr></table><h3 id="段首缩进"><a class="markdownIt-Anchor" href="#段首缩进"></a> 段首缩进</h3><p>使用特殊占位符，不同占位符所占空白是不一样大的（请在源码模式下查看）：</p><p>  或者  表示一个半角的空格</p><p>  或者  表示一个全角的空格</p><p>  或者  两个全角的空格（用的比较多）</p><p>  或者  不断行的空白格</p><h3 id="特殊符号"><a class="markdownIt-Anchor" href="#特殊符号"></a> 特殊符号</h3><p>©  ™  &amp;  &lt;  &gt;  £ ¥ € ® ± §  X² Y³ ¾ « » 37.2ºC</p><h2 id="mermaid-图示例"><a class="markdownIt-Anchor" href="#mermaid-图示例"></a> Mermaid 图示例</h2><h3 id="流程图"><a class="markdownIt-Anchor" href="#流程图"></a> 流程图</h3><h4 id="横向流程图"><a class="markdownIt-Anchor" href="#横向流程图"></a> 横向流程图</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph LR</span><br><span class="line">A[方形] --&gt;B(圆角)</span><br><span class="line">    B --&gt; C&#123;条件a&#125;</span><br><span class="line">    C --&gt;|a=1| D[结果1]</span><br><span class="line">    C --&gt;|a=2| E[结果2]</span><br><span class="line">    F[横向流程图]</span><br></pre></td></tr></table></figure><h4 id="竖向流程图"><a class="markdownIt-Anchor" href="#竖向流程图"></a> 竖向流程图</h4><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">graph TD</span><br><span class="line">A[方形] --&gt; B(圆角)</span><br><span class="line">    B --&gt; C&#123;条件a&#125;</span><br><span class="line">    C --&gt; |a=1| D[结果1]</span><br><span class="line">    C --&gt; |a=2| E[结果2]</span><br><span class="line">    F[竖向流程图]</span><br></pre></td></tr></table></figure><h3 id="uml-标准时序图"><a class="markdownIt-Anchor" href="#uml-标准时序图"></a> UML 标准时序图</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">%% 时序图例子,-&gt; 直线，--&gt;虚线，-&gt;&gt;实线箭头</span><br><span class="line">  sequenceDiagram</span><br><span class="line">    participant 张三</span><br><span class="line">    participant 李四</span><br><span class="line">    张三-&gt;王五: 王五你好吗？</span><br><span class="line">    loop 健康检查</span><br><span class="line">        王五-&gt;王五: 与疾病战斗</span><br><span class="line">    end</span><br><span class="line">    Note right of 王五: 合理 食物 &lt;br/&gt;看医生...</span><br><span class="line">    李四--&gt;&gt;张三: 很好!</span><br><span class="line">    王五-&gt;李四: 你怎么样?</span><br><span class="line">    李四--&gt;王五: 很好!</span><br></pre></td></tr></table></figure><h3 id="甘特图"><a class="markdownIt-Anchor" href="#甘特图"></a> 甘特图</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">%% 语法示例</span><br><span class="line">        gantt</span><br><span class="line">        dateFormat  YYYY-MM-DD</span><br><span class="line">        title 软件开发甘特图</span><br><span class="line">        section 设计</span><br><span class="line">        需求                      :done,    des1, 2014-01-06,2014-01-08</span><br><span class="line">        原型                      :active,  des2, 2014-01-09, 3d</span><br><span class="line">        UI设计                     :         des3, after des2, 5d</span><br><span class="line">    未来任务                     :         des4, after des3, 5d</span><br><span class="line">        section 开发</span><br><span class="line">        学习准备理解需求                      :crit, done, 2014-01-06,24h</span><br><span class="line">        设计框架                             :crit, done, after des2, 2d</span><br><span class="line">        开发                                 :crit, active, 3d</span><br><span class="line">        未来任务                              :crit, 5d</span><br><span class="line">        耍                                   :2d</span><br><span class="line">        section 测试</span><br><span class="line">        功能测试                              :active, a1, after des3, 3d</span><br><span class="line">        压力测试                               :after a1  , 20h</span><br><span class="line">        测试报告                               : 48h</span><br></pre></td></tr></table></figure><h2 id="sequence-图示例"><a class="markdownIt-Anchor" href="#sequence-图示例"></a> sequence 图示例</h2><p>【提示】Obsidian 不支持。</p><h3 id="uml-时序图"><a class="markdownIt-Anchor" href="#uml-时序图"></a> UML 时序图</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">对象A-&gt;对象B: 对象B你好吗?（请求）</span><br><span class="line">Note right of 对象B: 对象B的描述</span><br><span class="line">Note left of 对象A: 对象A的描述(提示)</span><br><span class="line">对象B--&gt;对象A: 我很好(响应)</span><br><span class="line">对象A-&gt;对象B: 你真的好吗？</span><br></pre></td></tr></table></figure><h3 id="uml-标准时序图复杂"><a class="markdownIt-Anchor" href="#uml-标准时序图复杂"></a> UML 标准时序图复杂</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">Title: 标题：复杂使用</span><br><span class="line">对象A-&gt;对象B: 对象B你好吗?（请求）</span><br><span class="line">Note right of 对象B: 对象B的描述</span><br><span class="line">Note left of 对象A: 对象A的描述(提示)</span><br><span class="line">对象B--&gt;对象A: 我很好(响应)</span><br><span class="line">对象B-&gt;小三: 你好吗</span><br><span class="line">小三--&gt;&gt;对象A: 对象B找我了</span><br><span class="line">对象A-&gt;对象B: 你真的好吗？</span><br><span class="line">Note over 小三,对象B: 我们是朋友</span><br><span class="line">participant C</span><br><span class="line">Note right of C: 没人陪我玩</span><br></pre></td></tr></table></figure><h2 id="flow-图"><a class="markdownIt-Anchor" href="#flow-图"></a> flow 图</h2><p>流程图代码分两块，上面一块是创建你的流程（创建元素），然后隔一行，创建流程的走向 (连接元素)。</p><ul><li>创建流程（元素）：tag=&gt;type: content:&gt;url<ul><li>tag 是流程图中的标签，在第二段连接元素时会用到。名称可以任意，一般为流程的英文缩写和数字的组合。</li><li>type 用来确定标签的类型，<code>=&gt;</code> 后面表示类型。由于标签的名称可以任意指定，所以要依赖 type 来确定标签的类型（start、end、operation、subroutine、condition、inputoutput）</li><li>content 是流程图文本框中的描述内容，<code>:</code> 后面表示内容，中英文均可。特别注意，<strong>冒号与文本之间一定要有个空格</strong></li><li>url 是一个连接，与框框中的文本相绑定，<code>:&gt;</code> 后面就是对应的 url 链接，点击文本时可以通过链接跳转到 url 指定页面</li></ul></li><li>指向流程 (连接元素)：标识（类别）-&gt;下一个标识<ul><li>使用 -&gt; 来连接两个元素</li><li>对于 condition 类型，有 yes 和 no 两个分支，如示例中的 cond(yes) 和 cond(no)</li><li>每个元素可以制定分支走向，默认向下，也可以用 right 指向右边，如示例中 cond2(yes,right)。</li></ul></li></ul><p>【提示】Obsidian 不支持。</p><h3 id="标准流程图横向"><a class="markdownIt-Anchor" href="#标准流程图横向"></a> 标准流程图（横向）</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">st=&gt;start: 开始框</span><br><span class="line">op=&gt;operation: 处理框</span><br><span class="line">cond=&gt;condition: 判断框(是或否?)</span><br><span class="line">sub1=&gt;subroutine: 子流程</span><br><span class="line">io=&gt;inputoutput: 输入输出框</span><br><span class="line">e=&gt;end: 结束框</span><br><span class="line">st(right)-&gt;op(right)-&gt;cond</span><br><span class="line">cond(yes)-&gt;io(bottom)-&gt;e</span><br><span class="line">cond(no)-&gt;sub1(right)-&gt;op</span><br></pre></td></tr></table></figure><h3 id="标准流程图"><a class="markdownIt-Anchor" href="#标准流程图"></a> 标准流程图</h3><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">st=&gt;start: 开始框</span><br><span class="line">op=&gt;operation: 处理框</span><br><span class="line">cond=&gt;condition: 判断框(是或否?)</span><br><span class="line">sub1=&gt;subroutine: 子流程</span><br><span class="line">io=&gt;inputoutput: 输入输出框</span><br><span class="line">e=&gt;end: 结束框</span><br><span class="line">st-&gt;op-&gt;cond</span><br><span class="line">cond(yes)-&gt;io-&gt;e</span><br><span class="line">cond(no)-&gt;sub1(right)-&gt;op</span><br></pre></td></tr></table></figure><h2 id="plantuml-文本绘图"><a class="markdownIt-Anchor" href="#plantuml-文本绘图"></a> PlantUML 文本绘图</h2><figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">@startuml</span><br><span class="line">Bob -&gt; Alice : hello</span><br><span class="line">Alice -&gt; Wonderland: hello</span><br><span class="line">Wonderland -&gt; next: hello</span><br><span class="line">next -&gt; Last: hello</span><br><span class="line">Last -&gt; next: hello</span><br><span class="line">next -&gt; Wonderland : hello</span><br><span class="line">Wonderland -&gt; Alice : hello</span><br><span class="line">Alice -&gt; Bob: hello</span><br><span class="line">@enduml</span><br></pre></td></tr></table></figure><hr class="footnotes-sep" /><section class="footnotes"><ol class="footnotes-list"><li id="fn1" class="footnote-item"><p><a href="https://zh.wikipedia.org/wiki/Markdown">Markdown - 维基百科，自由的百科全书 (wikipedia.org)</a> <a href="#fnref1" class="footnote-backref">↩︎</a></p></li><li id="fn2" class="footnote-item"><p>My reference. <a href="#fnref2" class="footnote-backref">↩︎</a></p></li><li id="fn3" class="footnote-item"><p>To add line breaks within a footnote, prefix new lines with 2 spaces.<br />This is a second line. （然而 Typora 不支持这种方式换行） <a href="#fnref3" class="footnote-backref">↩︎</a></p></li></ol></section>]]></content>
      
      
      <categories>
          
          <category> 测试 </category>
          
      </categories>
      
      
        <tags>
            
            <tag> 杂项 </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
